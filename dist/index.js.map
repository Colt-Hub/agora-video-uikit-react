{"version":3,"file":"index.js","sources":["../src/PropsContext.tsx","../src/Controls/Icons.tsx","../src/Controls/BtnTemplate.tsx","../src/Controls/Local/EndCall.tsx","../src/Controls/Local/FullScreen.tsx","../src/MaxUidContext.tsx","../src/MinUidContext.tsx","../src/TracksContext.tsx","../src/LocalUserContext.tsx","../src/RtcContext.tsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/Controls/Local/muteAudio.ts","../src/Controls/Local/LocalAudioMute.tsx","../src/Controls/Local/LocalCameraSwitch.tsx","../src/Controls/Local/muteVideo.ts","../src/Controls/Local/LocalVideoMute.tsx","../src/Controls/Local/Screenshare.tsx","../src/Controls/Local/Timer.tsx","../src/Controls/LocalControls.tsx","../src/RtmContext.tsx","../src/Controls/Remote/RemoteMutePopUp.tsx","../src/Controls/Remote/RemoteAudioMute.tsx","../src/Controls/Remote/RemoteVideoMute.tsx","../src/Username.tsx","../src/Controls/SwapUser.tsx","../src/VideoPlaceholder.tsx","../src/MaxVideoView.tsx","../src/GridVideo.tsx","../src/MinVideoView.tsx","../src/PinnedVideo.tsx","../src/Controls/Local/screenshareFunctions.tsx","../src/Reducer.tsx","../src/RTCConfigure.tsx","../src/RTMConfigure.tsx","../src/TracksConfigure.tsx","../src/AgoraUIKit.tsx"],"sourcesContent":["import {\n  AgoraRTCError,\n  ChannelMediaRelayError,\n  ChannelMediaRelayEvent,\n  ChannelMediaRelayState,\n  ConnectionDisconnectedReason,\n  ConnectionState,\n  IAgoraRTCClient,\n  IAgoraRTCRemoteUser,\n  ICameraVideoTrack,\n  ILocalAudioTrack,\n  ILocalVideoTrack,\n  IMicrophoneAudioTrack,\n  IRemoteAudioTrack,\n  IRemoteVideoTrack,\n  NetworkQuality,\n  RemoteStreamFallbackType,\n  RemoteStreamType,\n  UID,\n  VideoPlayerConfig\n} from 'agora-rtc-react'\n// import {RtmChannelEvents} from 'agora-rtm-react'\nimport React from 'react'\nimport { rtmCallbacks } from './RtmContext'\n\ninterface media {\n  videoTrack?: IRemoteVideoTrack\n  audioTrack?: IRemoteAudioTrack\n}\ninterface localMedia {\n  videoTrack?: ILocalVideoTrack\n  audioTrack?: ILocalAudioTrack\n}\n\nexport type mediaStore = {\n  [key in UID]: media | localMedia\n}\n\nexport enum remoteTrackState {\n  yes = 0, // remote published\n  subbed = 1, // remote published and subscribed\n  no = 2 // remote unpublished\n}\n\n/**\n * Data type for a UIKitUser\n */\nexport type UIKitUser = RemoteUIKitUser | LocalUIKitUser\nexport interface LocalUIKitUser {\n  /**\n   * The ID of the remote user.\n   */\n  uid: 0\n  /**\n   * Whether the remote user is sending an audio track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasAudio: ToggleState\n  /**\n   * Whether the remote user is sending a video track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasVideo: ToggleState\n}\nexport interface RemoteUIKitUser {\n  /**\n   * The ID of the remote user.\n   */\n  uid: UID\n  /**\n   * Whether the remote user is sending an audio track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasAudio: remoteTrackState\n  /**\n   * Whether the remote user is sending a video track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasVideo: remoteTrackState\n}\n\n/**\n * Remote Buttons styles\n */\ninterface remoteBtnStylesInterface {\n  /**\n   * Style for the remote mute audio button\n   */\n  muteRemoteAudio?: React.CSSProperties\n  /**\n   * Style for the remote mute video button\n   */\n  muteRemoteVideo?: React.CSSProperties\n  /**\n   * Style for the remote swap button in pinned layout\n   */\n  remoteSwap?: React.CSSProperties\n  /**\n   * Style for the overlay close button\n   */\n  minCloseBtnStyles?: React.CSSProperties\n}\n\n/**\n * Local Buttons styles\n */\ninterface localBtnStylesInterface {\n  /**\n   * Style for the local mute audio button\n   */\n  muteLocalAudio?: React.CSSProperties\n  /**\n   * Style for the local unmute audio button\n   */\n  unmuteLocalAudio?: React.CSSProperties\n  /**\n   * Style for the local screenshare button\n   */\n  screenshare?: React.CSSProperties\n  /**\n   * Style for the local mute video button\n   */\n  muteLocalVideo?: React.CSSProperties\n  /**\n   * Style for the local unmute video button\n   */\n  unmuteLocalVideo?: React.CSSProperties\n  /**\n   * Style for the switch camera button\n   */\n  switchCamera?: React.CSSProperties\n  /**\n   * Style for the end call button\n   */\n  endCall?: React.CSSProperties\n  /**\n   * Style for the expand video button\n   */\n  fullScreen?: React.CSSProperties\n  /**\n   * Style for the un-expand video button\n   */\n  normalScreen?: React.CSSProperties\n}\n\n/**\n * Props object for customising the UI Kit, takes in react native styling\n */\nexport interface StylePropInterface {\n  /**\n   * Sets the scaling of the video\n   */\n  videoMode?: {\n    max?: VideoPlayerConfig['fit']\n    min?: VideoPlayerConfig['fit']\n  }\n  /**\n   * Color tint for icons\n   */\n  theme?: string\n  /**\n   * Color tint for icons\n   */\n  iconSize?: number\n  /**\n   * Custom base64 string for icon\n   */\n  customIcon?: Partial<IconsInterface>\n  /**\n   * Show/Hide buttons labels\n   */\n  showButtonsLabel?: boolean\n  /**\n   * Show Timer with minutes and second of call duration\n   */\n  showTimer?: boolean\n  /**\n   * Show End Call Button\n   */\n  showEndCallButton?: boolean\n  /**\n   * Globals style for the local buttons (except end call)\n   */\n  BtnTemplateStyles?: React.CSSProperties\n  /**\n   * Style for the big view in pinned layout\n   */\n  maxViewStyles?: React.CSSProperties\n  /**\n   * Style for the small view in pinned layout\n   */\n  minViewStyles?: React.CSSProperties\n  /**\n   * Style for the small view container\n   */\n  minViewContainer?: React.CSSProperties\n  /**\n   * Style for the big view container\n   */\n  maxViewContainer?: React.CSSProperties\n  /**\n   * Style for the overlay on small user view when pressed in pinned layout\n   */\n  minViewOverlayContainer?: React.CSSProperties\n  /**\n   * Style for the overlay on small user view when pressed in pinned layout\n   */\n  maxViewOverlayContainer?: React.CSSProperties\n  /**\n   * Style for the remote button\n   */\n  remoteBtnStyles?: remoteBtnStylesInterface\n  /**\n   * Style for the remote button container\n   */\n  remoteBtnContainer?: React.CSSProperties\n  /**\n   * Style for specific local buttons, overrides the style applied by BtnTemplateStyles prop\n   */\n  localBtnStyles?: localBtnStylesInterface\n  /**\n   * Style for the local button container\n   */\n  localBtnContainer?: React.CSSProperties\n  /**\n   * Style for the local button wrapper\n   */\n  localBtnWrapper?: React.CSSProperties\n  /**\n   * Applies style to the individual cell (view) containing the video in the grid layout\n   */\n  gridVideoCells?: React.CSSProperties\n  /**\n   * Applies style to the grid container\n   */\n  gridVideoContainer?: React.CSSProperties\n  /**\n   * Applies style to the grid container\n   */\n  pinnedVideoContainer?: React.CSSProperties\n  /**\n   * Applies style to the pinned scrollview container\n   */\n  scrollViewContainer?: React.CSSProperties\n  /**\n   * Applies style to the global view containing the UI Kit\n   */\n  UIKitContainer?: React.CSSProperties\n  /**\n   * Applies style to the pop up container for remote mute requests\n   */\n  popUpContainer?: React.CSSProperties\n  /**\n   * Applies style to the displayed username text container\n   */\n  usernameText?: React.CSSProperties\n  /**\n   * Show swap camera button\n   */\n  showSwapButton?: boolean\n  /**\n   * Show swap user button inside other users Thumbnails\n   */\n  showSwapUser?: boolean\n}\n\n/**\n * Props for the VideoPlaceholder component\n */\nexport interface VideoPlaceholderProps {\n  user: UIKitUser\n  /**\n   * State value to display buttons\n   */\n  isShown: boolean\n  showButtons?: boolean\n  showSwap?: boolean\n}\n\n/**\n * Props object for customising the UI Kit functionality\n */\nexport interface RtcPropsInterface {\n  /**\n   * React functional component for overriding the default video placeholder\n   */\n  CustomVideoPlaceholder?: React.FunctionComponent<VideoPlaceholderProps>\n  /**\n   * enable screensharing feature\n   */\n  enableScreensharing?: boolean\n  /**\n   * Agora App ID - used to authenticate the request\n   */\n  appId: string\n  /**\n   * Channel name to join - users in the same channel can communicate with each other\n   */\n  channel: string\n  /**\n   * UID for local user to join the channel (default: 0)\n   */\n  uid?: number\n  /**\n   * UID for local user to join the channel (default: 1)\n   */\n  screenshareUid?: number\n  /**\n   * Token used to join a channel when using secured mode (default: null)\n   */\n  token?: string | null\n  /**\n   * Token used to join a channel when using secured mode (default: null)\n   */\n  screenshareToken?: string | null\n  /**\n   * URL for token server, manages fetching and updating tokens automatically. Must follow the schema here - https://github.com/AgoraIO-Community/agora-token-service/\n   */\n  tokenUrl?: string\n  /**\n   * Set to true to enable active speaker callback, switches the pinned video to active speaker if you're using the pinned layout. (default: false)\n   */\n  activeSpeaker?: boolean\n  /**\n   * Once set to true, the UI Kit attempts to join the channel. Can be set to false to initialise the SDK and wait before joining the channel. (default: true)\n   */\n  callActive?: boolean\n  /**\n   * Pass in a custom RTC client, to use your own implementation of the AgoraRTCClient.\n   */\n  customRtcClient?: IAgoraRTCClient\n  /**\n   * Enables dual stream mode. (default: false)\n   */\n  enableDualStream?: boolean\n  /**\n   * Enable dual stream mode with selected fallback option. (default: disabled)\n   */\n  dualStreamMode?: RemoteStreamFallbackType\n  /**\n   * Choose between grid layout and pinned layout. (default: pinned layout)\n   */\n  layout?: layout\n  /**\n   * Set local user's role between audience and host. Use with mode set to livestreaming. (default: host)\n   */\n  role?: role\n  /**\n   * Enable the mic before joining the call. (default: true)\n   */\n  enableAudio?: boolean\n  /**\n   * Enable the camera before joining the call. Only use for initiak(default: true)\n   */\n  enableVideo?: boolean\n  /**\n   * Disable Agora RTM, this also disables the use of usernames and remote mute functionality\n   */\n  disableRtm?: boolean\n  /**\n   * Enable blur background for local video. By default is false\n   */\n  enableBlurBackground?: boolean\n}\n\n/**\n * Props object for customising the UI Kit signalling functionality\n */\nexport interface RtmPropsInterface {\n  /**\n   * Username for the RTM Client, this value can be accessed using the userData object\n   */\n  username?: string\n  /**\n   * Token used to join an RTM channel when using secured mode (default: null)\n   */\n  token?: string | undefined\n  /**\n   * UID for local user to join the RTM channel (default: uses the RTC UID)\n   */\n  uid?: string\n  /**\n   * Show a pop up with option to accept mute request instead of directly muting the remote user (default: true), if set to false you cannot unmute users.\n   */\n  showPopUpBeforeRemoteMute?: boolean\n  /**\n   * Display RTM usernames in the Videocall (default: false)\n   */\n  displayUsername?: boolean\n}\n\n/**\n * Select a pre built layout\n */\nexport enum layout {\n  /**\n   * 0: Grid layout: each user occupies a cell in the grid\n   */\n  grid = 0,\n  /**\n   * 2: Pinned layout: MaxUser occupies the main view, the other users are in a floating view on top\n   */\n  pin = 1\n}\n\n/**\n * User role for live streaming mode\n */\ntype role = 'audience' | 'host'\n\nexport enum ToggleState {\n  disabled, // set as 0 - to evaluate falsy\n  enabled, // set as 1 - to evaluate truthy\n  disabling, // enabled -> disabling -> disabled\n  enabling // disabled -> enabling -> enabled\n}\n\n/**\n * Callbacks exposed by the UIKit\n */\nexport type CallbacksInterface = UIKitEventsInterface & RtcEventsInterface\nexport interface UIKitEventsInterface {\n  EndCall(): void\n  ActiveSpeaker(uid: UID): void\n  Screensharing(state: boolean): void\n  ['update-user-video'](\n    tracks: [IMicrophoneAudioTrack, ICameraVideoTrack]\n  ): void\n  ['user-swap'](user: UIKitUser): void\n  ['local-user-mute-video'](status: ToggleState): void\n  ['local-user-mute-audio'](status: ToggleState): void\n  ['remote-user-mute-video'](user: UIKitUser, status: remoteTrackState): void\n  ['remote-user-mute-audio'](user: UIKitUser, status: remoteTrackState): void\n  ['leave-channel'](): void\n  /**\n   * Callback for: when a user expand to full screen the video\n   */\n  FullScreen(): void\n  /**\n   * Callback for when a user click to go back to normal screen the video\n   */\n  NormalScreen(): void\n  /**\n   * Callback for when a user click to go back to normal screen the video\n   */\n  ErrorJoining(): void\n}\nexport interface RtcEventsInterface {\n  ['connection-state-change'](\n    curState: ConnectionState,\n    revState: ConnectionState,\n    reason?: ConnectionDisconnectedReason\n  ): void\n  ['user-joined'](user: IAgoraRTCRemoteUser): void\n  ['user-left'](user: IAgoraRTCRemoteUser, reason: string): void\n  ['user-published'](\n    user: IAgoraRTCRemoteUser,\n    mediaType: 'audio' | 'video'\n  ): void\n  ['user-unpublished'](\n    user: IAgoraRTCRemoteUser,\n    mediaType: 'audio' | 'video'\n  ): void\n  ['user-info-updated'](\n    uid: UID,\n    msg:\n      | 'mute-audio'\n      | 'mute-video'\n      | 'enable-local-video'\n      | 'unmute-audio'\n      | 'unmute-video'\n      | 'disable-local-video'\n  ): void\n  ['media-reconnect-start'](uid: UID, streamType: RemoteStreamType): void\n  ['media-reconnect-end'](uid: UID, streamType: RemoteStreamType): void\n  ['stream-type-changed'](uid: UID, streamType: RemoteStreamType): void\n  ['stream-fallback'](\n    uid: UID,\n    isFallbackOrRecover: 'fallback' | 'recover'\n  ): void\n  ['channel-media-relay-state'](\n    state: ChannelMediaRelayState,\n    code: ChannelMediaRelayError\n  ): void\n  ['channel-media-relay-event'](event: ChannelMediaRelayEvent): void\n  ['volume-indicator'](\n    result: {\n      level: number\n      uid: UID\n    }[]\n  ): void\n  ['crypt-error'](): void\n  ['token-privilege-will-expire'](): void\n  ['token-privilege-did-expire'](): void\n  ['network-quality'](stats: NetworkQuality): void\n  ['live-streaming-error'](url: string, err: AgoraRTCError): void\n  ['live-streaming-warning'](url: string, warning: AgoraRTCError): void\n  ['stream-inject-status'](\n    status: InjectStreamEventStatus,\n    uid: UID,\n    url: string\n  ): void\n  ['is-using-cloud-proxy'](isUsingProxy: boolean): void\n}\nexport interface PropsInterface {\n  /**\n   * Props used to customise the UIKit communication functionality\n   */\n  rtcProps: RtcPropsInterface\n  /**\n   * Props used to customise the UIKit signalling functionality\n   */\n  rtmProps?: RtmPropsInterface\n  /**\n   * Props used to customise the UI Kit's appearance (accepts style object for different components)\n   */\n  styleProps?: Partial<StylePropInterface>\n  /**\n   * Callbacks for different functions of the UI Kit\n   */\n  callbacks?: Partial<CallbacksInterface>\n  /**\n   * Callbacks for different functions of the UI Kit\n   */\n  rtmCallbacks?: rtmCallbacks\n}\n\n/**\n * Interface for icons supplied with the UIKit (curtosy of https://feathericons.com/)\n */\nexport interface IconsInterface {\n  /**\n   * Icon for Camera/Video mute in on state\n   */\n  videocam: string\n  /**\n   * Icon for Camera/Video mute in off state\n   */\n  videocamOff: string\n  /**\n   * Icon for Mic/Audio mute in on state\n   */\n  mic: string\n  /**\n   * Icon for Mic/Audio mute in off state\n   */\n  micOff: string\n  /**\n   * Icon to switch between device cameras\n   */\n  switchCamera: string\n  /**\n   * Icon to end the call\n   */\n  callEnd: string\n  /**\n   * Icon to swap the min user to max view\n   */\n  remoteSwap: string\n  /**\n   * Icon to close the overlay in floating layout\n   */\n  close: string\n  /**\n   * Icon to expand video screen\n   */\n  fullScreen: string\n}\n\nconst initialValue: PropsInterface = {\n  rtcProps: {\n    appId: '',\n    channel: '',\n    role: 'host'\n  },\n  rtmProps: {}\n}\n/**\n * React Context to manage the user props\n */\nconst PropsContext = React.createContext<PropsInterface>(initialValue)\n\nexport const PropsProvider = PropsContext.Provider\nexport const PropsConsumer = PropsContext.Consumer\n\nconst enum InjectStreamEventStatus {\n  /**\n   * Successfully injects the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_SUCCESS = 0,\n  /**\n   * The online media stream already exists.\n   */\n  INJECT_STREAM_STATUS_START_ALREADY_EXISTS = 1,\n  /**\n   * Injecting the online media stream is not authorized.\n   */\n  INJECT_STREAM_STATUS_START_UNAUTHORIZED = 2,\n  /**\n   * Timeout when injecting the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_TIMEOUT = 3,\n  /**\n   * Fails to inject the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_FAILED = 4,\n  /**\n   * Succeessfully stops injecting the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_SUCCESS = 5,\n  /**\n   * Fails to find the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_NOT_FOUND = 6,\n  /**\n   * Stopping injecting the online media stream is not authorized.\n   */\n  INJECT_STREAM_STATUS_STOP_UNAUTHORIZED = 7,\n  /**\n   * Timeout when stopping the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_TIMEOUT = 8,\n  INJECT_STREAM_STATUS_STOP_FAILED = 9,\n  /**\n   * The online media stream is corrupted.\n   */\n  INJECT_STREAM_STATUS_BROKEN = 10\n}\n\nexport default PropsContext\n","import React from 'react'\n\nconst icons = {\n  videocam: (\n    <React.Fragment>\n      <polygon points='23 7 16 12 23 17 23 7' />\n      <rect x='1' y='5' width='15' height='14' rx='2' ry='2' />\n    </React.Fragment>\n  ),\n  videocamOff: (\n    <React.Fragment>\n      <path d='M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10' />\n      <line x1='1' y1='1' x2='23' y2='23' />\n    </React.Fragment>\n  ),\n  remoteSwap: (\n    <React.Fragment>\n      <polyline points='15 3 21 3 21 9' />\n      <polyline points='9 21 3 21 3 15' />\n      <line x1='21' y1='3' x2='14' y2='10' />\n      <line x1='3' y1='21' x2='10' y2='14' />\n    </React.Fragment>\n  ),\n  callEnd: (\n    <React.Fragment>\n      <path d='M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91' />\n      <line x1='23' y1='1' x2='1' y2='23' />\n    </React.Fragment>\n  ),\n  mic: (\n    <React.Fragment>\n      <path d='M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z' />\n      <path d='M19 10v2a7 7 0 0 1-14 0v-2' />\n      <line x1='12' y1='19' x2='12' y2='23' />\n      <line x1='8' y1='23' x2='16' y2='23' />\n    </React.Fragment>\n  ),\n  micOff: (\n    <React.Fragment>\n      <line x1='1' y1='1' x2='23' y2='23' />\n      <path d='M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6' />\n      <path d='M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23' />\n      <line x1='12' y1='19' x2='12' y2='23' />\n      <line x1='8' y1='23' x2='16' y2='23' />\n    </React.Fragment>\n  ),\n  screen: (\n    <React.Fragment>\n      <rect x='2' y='3' width='20' height='14' rx='2' ry='2' />\n      <line x1='8' y1='21' x2='16' y2='21' />\n      <line x1='12' y1='17' x2='12' y2='21' />\n    </React.Fragment>\n  ),\n  stop: (\n    <React.Fragment>\n      <line x1='18' y1='6' x2='6' y2='18' />\n      <line x1='6' y1='6' x2='18' y2='18' />\n    </React.Fragment>\n  ),\n  fullScreen: (\n    <React.Fragment>\n      <path\n        d='M0.31456 13.6441L0.314903 13.7441L0.414903 13.7438L5.74537 13.7255L5.84537 13.7251L5.84502 13.6251L5.84009 12.1862L5.83974 12.0863L5.73975 12.0866L2.82959 12.0966L2.82925 12.0966L1.94516 12.0966L1.94516 11.2189L1.94516 11.2185L1.93517 8.30803L1.93483 8.20803L1.83483 8.20838L0.395932 8.21331L0.295932 8.21366L0.296275 8.31366L0.31456 13.6441ZM0.287412 5.73018L0.287755 5.83018L0.387754 5.82984L1.82665 5.8249L1.92665 5.82456L1.92631 5.72456L1.91689 2.97864L1.93333 2.09348L2.79459 2.09348L2.79493 2.09348L5.57462 2.08394L5.67462 2.0836L5.67428 1.9836L5.66934 0.544703L5.669 0.444703L5.569 0.445046L0.369343 0.462884L0.269343 0.463228L0.269686 0.563227L0.287412 5.73018ZM8.2285 13.617L8.22884 13.717L8.32884 13.7166L13.4958 13.6989L13.5958 13.6986L13.5955 13.5986L13.5777 8.43161L13.5774 8.33161L13.4774 8.33195L12.0385 8.33689L11.9385 8.33723L11.9388 8.43723L11.9483 11.1839L11.9483 11.1842L11.9483 12.0683L11.0706 12.0683L11.0702 12.0683L8.32322 12.0777L8.22322 12.0781L8.22357 12.1781L8.2285 13.617ZM8.18856 1.97498L8.18891 2.07498L8.28891 2.07463L11.0343 2.06521L11.9284 2.09065L11.92 2.94192L11.92 2.94192L11.92 2.94325L11.9294 5.69024L11.9297 5.79024L12.0297 5.7899L13.4686 5.78496L13.5686 5.78462L13.5683 5.68462L13.5506 0.517667L13.5502 0.417667L13.4502 0.41801L8.28328 0.435736L8.18328 0.436079L8.18363 0.536078L8.18856 1.97498Z'\n        fill='white'\n        stroke='white'\n        strokeWidth='0.2'\n      />\n    </React.Fragment>\n  ),\n  switchCamera: (\n    <React.Fragment>\n      <path\n        d='M17.2315 9.27891L14.3054 12.2422L15.3695 13.2898L16.5517 12.0925C16.4138 13.5293 15.9212 14.6966 15.0739 15.5946C14.2266 16.4925 13.202 16.9415 12 16.9415C11.665 16.9415 11.3744 16.9166 11.1281 16.8667C10.8818 16.8168 10.6502 16.7419 10.4335 16.6422L9.3399 17.7197C9.75369 17.9791 10.1724 18.1637 10.5961 18.2735C11.0197 18.3832 11.4877 18.4381 12 18.4381C13.6749 18.4381 15.069 17.8494 16.1823 16.6721C17.2956 15.4948 17.9015 13.9882 18 12.1524L19.1232 13.2898L20.1872 12.2422L17.2315 9.27891ZM6.82759 15.415L9.75369 12.4517L8.68966 11.4041L7.50739 12.6014C7.64532 11.1646 8.13793 9.99728 8.98522 9.09932C9.83251 8.20136 10.8571 7.75238 12.0591 7.75238C12.3941 7.75238 12.6847 7.77732 12.931 7.82721C13.1773 7.8771 13.4089 7.95193 13.6256 8.0517L14.7192 6.97415C14.3054 6.71474 13.8867 6.53016 13.4631 6.42041C13.0394 6.31066 12.5714 6.25578 12.0591 6.25578C10.3842 6.25578 8.99015 6.84444 7.87685 8.02177C6.76355 9.19909 6.15764 10.7057 6.05911 12.5415L4.93596 11.4041L3.87192 12.4517L6.82759 15.415ZM2.00985 22C1.47783 22 1.00985 21.7955 0.605911 21.3864C0.20197 20.9773 0 20.5034 0 19.9646V4.72925C0 4.19048 0.20197 3.71655 0.605911 3.30748C1.00985 2.89841 1.47783 2.69388 2.00985 2.69388H6.26601L8.48276 0H15.5172L17.734 2.69388H21.9901C22.5222 2.69388 22.9901 2.89841 23.3941 3.30748C23.798 3.71655 24 4.19048 24 4.72925V19.9646C24 20.5034 23.798 20.9773 23.3941 21.3864C22.9901 21.7955 22.5222 22 21.9901 22H2.00985ZM21.9901 19.9646V4.72925H16.8177L14.5714 2.06531H9.42857L7.18227 4.72925H2.00985V19.9646H21.9901Z'\n        fill='white'\n        stroke='white'\n        strokeWidth='0.2'\n      />\n    </React.Fragment>\n  )\n}\n\nexport default icons\n","import React, { useContext } from 'react'\nimport PropsContext from '../PropsContext'\nimport Icons from './Icons'\ninterface BtnTemplateInterface {\n  name: string\n  color?: string\n  onClick: () => void\n  disabled?: boolean\n  style?: React.CSSProperties\n}\n\nconst BtnTemplate = (props: BtnTemplateInterface) => {\n  const { onClick, name, disabled, style } = props\n  const { styleProps } = useContext(PropsContext)\n  const { theme, BtnTemplateStyles, iconSize, customIcon } = styleProps || {}\n\n  return (\n    <div\n      style={{\n        ...{\n          width: 35,\n          height: 35,\n          borderRadius: '100%',\n          borderWidth: 2,\n          borderStyle: 'solid',\n          borderColor: '#fff',\n          backgroundColor: 'rgba(0,80,180,0.2)',\n          alignItems: 'center',\n          justifyContent: 'center',\n          display: 'flex',\n          cursor: disabled ? 'auto' : 'pointer',\n          margin: 4\n        },\n        ...BtnTemplateStyles,\n        ...style\n      }}\n      onClick={onClick}\n    >\n      {customIcon && customIcon[name] ? (\n        <img src={customIcon[name]} alt={name} />\n      ) : (\n        <svg\n          style={{\n            width: iconSize || 24,\n            height: iconSize || 24\n          }}\n          xmlns='http://www.w3.org/2000/svg'\n          width='24'\n          height='24'\n          viewBox='0 0 24 24'\n          fill='none'\n          opacity={disabled ? '0.5' : '1'}\n          stroke={theme || '#fff'}\n          strokeWidth='2'\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          // className='feather feather-video'\n        >\n          {Icons[name]}\n        </svg>\n      )}\n    </div>\n  )\n}\n\nexport default BtnTemplate\n","import React, { useContext } from 'react'\nimport PropsContext from '../../PropsContext'\n// import RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\n\nfunction EndCall() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { endCall } = localBtnStyles || {}\n  // const { dispatch } = useContext(RtcContext)\n\n  return (\n    <BtnTemplate\n      style={endCall || { backgroundColor: '#ef5588', borderColor: '#f00' }}\n      name='callEnd'\n      onClick={() => callbacks?.EndCall && callbacks.EndCall()}\n    />\n  )\n}\n\nexport default EndCall\n","import React, { useContext, useState } from 'react'\nimport PropsContext from '../../PropsContext'\nimport BtnTemplate from '../BtnTemplate'\n\nfunction FullScreen() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { fullScreen, normalScreen } = localBtnStyles || {}\n  const [action, setAction] = useState('fullScreen')\n\n  const onClick = () => {\n    if (action === 'fullScreen') {\n      callbacks?.FullScreen && callbacks.FullScreen()\n      setAction('normal')\n    }\n    if (action === 'normal') {\n      callbacks?.NormalScreen && callbacks.NormalScreen()\n      setAction('fullScreen')\n    }\n  }\n\n  return (\n    <div>\n      <BtnTemplate\n        style={\n          action === 'fullScreen' ? fullScreen : normalScreen || fullScreen\n        }\n        name='fullScreen'\n        onClick={onClick}\n      />\n    </div>\n  )\n}\n\nexport default FullScreen\n","import React from 'react'\nimport { UIKitUser } from './PropsContext'\n\n/**\n * React context to expose user array displayed in the maximised view\n */\nconst MaxUidContext = React.createContext<UIKitUser[]>([])\n\nexport const MaxUidProvider = MaxUidContext.Provider\nexport const MaxUidConsumer = MaxUidContext.Consumer\nexport default MaxUidContext\n","import React from 'react'\nimport { UIKitUser } from './PropsContext'\n\n/**\n * React context to expose user array displayed in the minimized view\n */\nconst MinUidContext = React.createContext<UIKitUser[]>([])\n\nexport const MinUidProvider = MinUidContext.Provider\nexport const MinUidConsumer = MinUidContext.Consumer\nexport default MinUidContext\n","import React from 'react'\nimport { ILocalAudioTrack, ILocalVideoTrack } from 'agora-rtc-react'\n\nexport interface TracksContextInterface {\n  localVideoTrack: ILocalVideoTrack | null\n  localAudioTrack: ILocalAudioTrack | null\n  switchCamera: () => void\n  facingMode: 'user' | 'environment'\n}\n/**\n * React context that contains the local audio and video tracks. It's setup by {@link TracksConfigure}.\n */\nconst TracksContext = React.createContext<TracksContextInterface>(\n  {} as TracksContextInterface\n)\n\nexport const TracksProvider = TracksContext.Provider\nexport const TracksConsumer = TracksContext.Consumer\nexport default TracksContext\n","import React, { useContext, createContext, PropsWithChildren } from 'react'\nimport MaxUidContext from './MaxUidContext'\nimport MinUidContext from './MinUidContext'\nimport { LocalUIKitUser } from './PropsContext'\nimport TracksContext from './TracksContext'\n\nexport const LocalContext = createContext<LocalUIKitUser>({} as LocalUIKitUser)\nexport const LocalProvider = LocalContext.Provider\nexport const LocalConsumer = LocalContext.Consumer\n\ninterface LocalUserContextInterface {\n  children: React.ReactNode\n}\n/**\n * React context that exposes the {@link LocalUIKitUser} data object\n */\nconst LocalUserContext: React.FC<\n  PropsWithChildren<LocalUserContextInterface>\n> = (props) => {\n  const { localAudioTrack } = useContext(TracksContext)\n  const max = useContext(MaxUidContext)\n  const min = useContext(MinUidContext)\n\n  let localUser: LocalUIKitUser\n  if (max[0].uid === 0) {\n    localUser = max[0] as LocalUIKitUser\n  } else {\n    localUser = min.find((u) => u.uid === 0) as LocalUIKitUser\n  }\n\n  // Preserve audio state on changes\n  localUser.hasAudio = localAudioTrack?.enabled ? 1 : 0\n\n  return (\n    <LocalContext.Provider value={localUser}>\n      {props.children}\n    </LocalContext.Provider>\n  )\n}\n\nexport default LocalUserContext\n","import React from 'react'\nimport {\n  IAgoraRTCClient,\n  ILocalAudioTrack,\n  ILocalVideoTrack,\n  UID\n} from 'agora-rtc-react'\nimport { CallbacksInterface, mediaStore } from './PropsContext'\n\nexport type DispatchType = <\n  T extends keyof CallbacksInterface,\n  V extends Parameters<CallbacksInterface[T]>\n>(action: {\n  type: T\n  value: V\n}) => void\n\n/**\n * Interface for the RtcContext\n */\nexport interface RtcContextInterface {\n  /**\n   * The client object used by the web SDK\n   */\n  client: IAgoraRTCClient\n  /**\n   * The local user's video track\n   */\n  localVideoTrack: ILocalVideoTrack | null\n  /**\n   * The local user's audio track\n   */\n  localAudioTrack: ILocalAudioTrack | null\n  /**\n   * An object containing a key value store of tracks mapped to users UIDs\n   */\n  mediaStore: mediaStore\n  /**\n   * React dispatch to update values in the reducer\n   */\n  dispatch: DispatchType\n  /**\n   * The local UID returned by the SDK when using local uid as 0.\n   */\n  localUid: React.MutableRefObject<UID | undefined>\n  /**\n   * Is the UIKit in a channel\n   */\n  channelJoined: boolean\n  toggleScreensharing: () => Promise<void>\n  isScreensharing: boolean\n  switchCamera: () => void\n}\n/**\n * Context to access local/remote tracks, client, dispatch and localuid. It's setup by {@link RtcConfigure}.\n */\nconst RtcContext = React.createContext<RtcContextInterface>(\n  {} as RtcContextInterface\n)\n\nexport interface ActionInterface<T extends keyof CallbacksInterface> {\n  type: T\n  value: Parameters<CallbacksInterface[T]>\n}\nexport type ActionType<T extends keyof CallbacksInterface> = ActionInterface<T>\n\nexport const RtcProvider = RtcContext.Provider\nexport const RtcConsumer = RtcContext.Consumer\nexport default RtcContext\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import { DispatchType } from '../../RtcContext'\nimport { LocalUIKitUser, ToggleState } from '../../PropsContext'\nimport { ILocalAudioTrack } from 'agora-rtc-react'\nimport { CallbacksInterface } from '../..'\n\nexport default async (\n  user: LocalUIKitUser,\n  dispatch: DispatchType,\n  localAudioTrack: ILocalAudioTrack,\n  callbacks?: Partial<CallbacksInterface>\n) => {\n  // console.log('!mute audio', user)\n  if (user.uid === 0) {\n    const localState = user.hasAudio\n    if (\n      localState === ToggleState.enabled ||\n      localState === ToggleState.disabled\n    ) {\n      // Disable UI\n      let newState =\n        localState === ToggleState.enabled\n          ? ToggleState.disabling\n          : ToggleState.enabling\n      dispatch({\n        type: 'local-user-mute-audio',\n        value: [newState]\n      })\n      callbacks &&\n        callbacks['local-user-mute-audio'] &&\n        callbacks['local-user-mute-audio'](newState)\n      try {\n        await localAudioTrack?.setEnabled(localState !== ToggleState.enabled)\n        // Enable UI\n        newState =\n          localState === ToggleState.enabled\n            ? ToggleState.disabled\n            : ToggleState.enabled\n        callbacks &&\n          callbacks['local-user-mute-audio'] &&\n          callbacks['local-user-mute-audio'](newState)\n        dispatch({\n          type: 'local-user-mute-audio',\n          value: [\n            localState === ToggleState.enabled\n              ? ToggleState.disabled\n              : ToggleState.enabled\n          ]\n        })\n      } catch (e) {\n        dispatch({\n          type: 'local-user-mute-audio',\n          value: [localState]\n        })\n      }\n    }\n  }\n}\n","import React, { useContext } from 'react'\nimport { LocalContext } from '../../LocalUserContext'\nimport PropsContext, { ToggleState } from '../../PropsContext'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport muteAudio from './muteAudio'\n\nfunction LocalAudioMute() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { muteLocalAudio, unmuteLocalAudio } = localBtnStyles || {}\n  const { dispatch, localAudioTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={\n          local.hasAudio === ToggleState.enabled\n            ? muteLocalAudio\n            : unmuteLocalAudio || muteLocalAudio\n        }\n        name={local.hasAudio === ToggleState.enabled ? 'mic' : 'micOff'}\n        onClick={() =>\n          localAudioTrack &&\n          muteAudio(local, dispatch, localAudioTrack, callbacks)\n        }\n      />\n    </div>\n  )\n}\n\nexport default LocalAudioMute\n","import React, { useContext } from 'react'\n\nimport PropsContext from '../../PropsContext'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\n\nfunction LocalCameraSwitch() {\n  const { styleProps } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { switchCamera: switchCameraButton } = localBtnStyles || {}\n  const { switchCamera } = useContext(RtcContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={switchCameraButton}\n        name='switchCamera'\n        onClick={switchCamera}\n      />\n    </div>\n  )\n}\n\nexport default LocalCameraSwitch\n","import { DispatchType } from '../../RtcContext'\nimport {\n  CallbacksInterface,\n  LocalUIKitUser,\n  ToggleState\n} from '../../PropsContext'\nimport { ILocalVideoTrack } from 'agora-rtc-react'\n\nexport default async (\n  user: LocalUIKitUser,\n  dispatch: DispatchType,\n  localVideoTrack: ILocalVideoTrack,\n  callbacks?: Partial<CallbacksInterface>\n) => {\n  if (user.uid === 0) {\n    const localState = user.hasVideo\n    if (\n      localState === ToggleState.enabled ||\n      localState === ToggleState.disabled\n    ) {\n      // Disable UI\n      let newState =\n        localState === ToggleState.enabled\n          ? ToggleState.disabling\n          : ToggleState.enabling\n      dispatch({\n        type: 'local-user-mute-video',\n        value: [newState]\n      })\n      callbacks &&\n        callbacks['local-user-mute-video'] &&\n        callbacks['local-user-mute-video'](newState)\n      try {\n        await localVideoTrack?.setEnabled(localState !== ToggleState.enabled)\n        // Enable UI\n        newState =\n          localState === ToggleState.enabled\n            ? ToggleState.disabled\n            : ToggleState.enabled\n        callbacks &&\n          callbacks['local-user-mute-video'] &&\n          callbacks['local-user-mute-video'](newState)\n        dispatch({\n          type: 'local-user-mute-video',\n          value: [newState]\n        })\n      } catch (e) {\n        dispatch({\n          type: 'local-user-mute-video',\n          value: [localState]\n        })\n      }\n    }\n  }\n}\n","import React, { useContext } from 'react'\nimport { LocalContext } from '../../LocalUserContext'\nimport PropsContext, { ToggleState } from '../../PropsContext'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport muteVideo from './muteVideo'\n\nfunction LocalVideoMute() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { muteLocalVideo, unmuteLocalVideo } = localBtnStyles || {}\n  const { dispatch, localVideoTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={\n          local.hasVideo === ToggleState.enabled\n            ? muteLocalVideo\n            : unmuteLocalVideo || muteLocalVideo\n        }\n        name={\n          local.hasVideo === ToggleState.enabled ? 'videocam' : 'videocamOff'\n        }\n        onClick={() =>\n          localVideoTrack &&\n          muteVideo(local, dispatch, localVideoTrack, callbacks)\n        }\n      />\n    </div>\n  )\n}\n\nexport default LocalVideoMute\n","import React, { useContext } from 'react'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext from '../../PropsContext'\n\nfunction Screenshare() {\n  const { styleProps } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { screenshare } = localBtnStyles || {}\n  const { toggleScreensharing, isScreensharing } = useContext(RtcContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={screenshare}\n        name={isScreensharing ? 'stop' : 'screen'}\n        onClick={() => toggleScreensharing()}\n      />\n    </div>\n  )\n}\n\nexport default Screenshare\n","import React, { useEffect, useState } from 'react'\n\nconst Timer = () => {\n  const [counter, setCounter] = useState(0)\n\n  useEffect(() => {\n    const timer = setInterval(() => setCounter(counter + 1), 1000)\n    return () => clearInterval(timer)\n  }, [counter])\n\n  const minutes = Math.trunc(counter / 60)\n  const seconds = counter - minutes * 60\n\n  return (\n    <p\n      style={{\n        color: 'white',\n        fontSize: 14,\n        paddingLeft: 30,\n        paddingRight: 30\n      }}\n    >{`${minutes}:${seconds < 10 ? `0${seconds}` : seconds}`}</p>\n  )\n}\n\nexport default Timer\n","import React, { useContext } from 'react'\nimport PropsContext from '../PropsContext'\nimport EndCall from './Local/EndCall'\nimport FullScreen from './Local/FullScreen'\nimport LocalAudioMute from './Local/LocalAudioMute'\nimport LocalCameraSwitch from './Local/LocalCameraSwitch'\nimport LocalVideoMute from './Local/LocalVideoMute'\nimport Screenshare from './Local/Screenshare'\nimport Timer from './Local/Timer'\n\nfunction LocalControls() {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const {\n    localBtnContainer,\n    showTimer = false,\n    showSwapButton = false,\n    showEndCallButton = true,\n    localBtnWrapper = {}\n  } = styleProps || {}\n\n  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)\n\n  return (\n    <div\n      style={{\n        ...{\n          backgroundColor: '#007bff',\n          width: '100%',\n          height: 70,\n          zIndex: 10,\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-evenly',\n          alignItems: 'center'\n        },\n        ...localBtnContainer\n      }}\n    >\n      <div\n        id='wrapper'\n        style={{\n          width: 350,\n          flexDirection: 'row',\n          display: 'flex',\n          ...localBtnWrapper\n        }}\n      >\n        {rtcProps.role !== 'audience' && showTimer && <Timer />}\n        {rtcProps.role !== 'audience' && <LocalVideoMute />}\n        {rtcProps.role !== 'audience' && <LocalAudioMute />}\n        {isMobile && rtcProps.role !== 'audience' && showSwapButton && (\n          <LocalCameraSwitch />\n        )}\n        {rtcProps.role !== 'audience' && <FullScreen />}\n        {rtcProps.role !== 'audience' && rtcProps.enableScreensharing && (\n          <Screenshare />\n        )}\n        {showEndCallButton && <EndCall />}\n      </div>\n    </div>\n  )\n}\n\nexport default LocalControls\n","import { UID } from 'agora-rtc-react'\nimport { RtmClient, RtmEvents } from 'agora-rtm-react'\nimport { createContext } from 'react'\n\n/**\n * Callbacks to pass to RTM events\n */\nexport type rtmCallbacks = {\n  channel?: Partial<RtmEvents.RtmChannelEvents>\n  client?: Partial<RtmEvents.RtmClientEvents>\n}\n\nexport enum rtmStatusEnum {\n  // Initialisation failed\n  initFailed,\n  // Login has not been attempted\n  offline,\n  // RTM is initialising, process is not yet complete\n  initialising,\n  // Currently attempting to log in\n  loggingIn,\n  // RTM has logged in\n  loggedIn,\n  // RTM is logged in, and connected to the current channel\n  connected,\n  // RTM Login Failed\n  loginFailed\n}\n\nexport type messageType = 'UserData' | 'MuteRequest'\n\nexport type messageObject = userData | muteRequest | genericAction\n\nexport enum clientRoleRaw {\n  broadcaster,\n  audience\n}\n\nexport enum mutingDevice {\n  camera,\n  microphone\n}\n\nexport type genericAction = {\n  messageType: 'RtmDataRequest'\n  type: 'ping' | 'pong' | 'userData'\n}\n\nexport type muteRequest = {\n  messageType: 'MuteRequest'\n  rtcId: UID\n  mute: boolean\n  device: mutingDevice\n  isForceful: boolean\n}\n\nexport type userData = {\n  messageType: 'UserData'\n  rtmId: string\n  rtcId: UID\n  username?: string\n  role: clientRoleRaw\n  uikit: {\n    platform: string\n    framework: string\n    version: string\n  }\n  agora: {\n    rtm: string\n    rtc: string\n  }\n}\n\nexport enum popUpStateEnum {\n  closed,\n  muteMic,\n  muteCamera,\n  unmuteMic,\n  unmuteCamera\n}\n/**\n * Interface for RTM Context\n */\ninterface rtmContext {\n  /**\n   * rtm connection status\n   */\n  rtmStatus: rtmStatusEnum\n  /**\n   * send message to everyone in the channel\n   */\n  sendChannelMessage: (msg: messageObject) => void\n  /**\n   * send message to a specific user\n   */\n  sendPeerMessage: (msg: messageObject, uid: string) => void\n  /**\n   * RTM Client instance\n   */\n  rtmClient: RtmClient\n  /**\n   * map with userdata for each rtc uid in the channel\n   */\n  userDataMap: Object\n  /**\n   * map with rtm uid for each rtc uid in the channel\n   */\n  uidMap: Object\n  /**\n   * Send a mute request\n   */\n  sendMuteRequest: (device: mutingDevice, rtcId: UID, mute: boolean) => void\n  /**\n   * RTM usernames\n   */\n  usernames: {}\n  /**\n   * state to display pop up on remote mute request\n   */\n  popUpState: popUpStateEnum\n  /**\n   * set state to hide pop up\n   */\n  setPopUpState: React.Dispatch<React.SetStateAction<popUpStateEnum>>\n}\n/**\n * Context to access RTM data. It's setup by {@link RtmConfigure}.\n */\nconst RtmContext = createContext(null as unknown as rtmContext)\n\nexport const RtmProvider = RtmContext.Provider\nexport const RtmConsumer = RtmContext.Consumer\nexport default RtmContext\n","import React, { CSSProperties, useContext } from 'react'\nimport PropsContext from '../../PropsContext'\nimport RtmContext, { popUpStateEnum } from '../../RtmContext'\nimport RtcContext from '../../RtcContext'\nimport muteVideo from '../Local/muteVideo'\nimport { LocalContext } from '../../LocalUserContext'\nimport muteAudio from '../Local/muteAudio'\n\nfunction PopUp() {\n  const { styleProps } = useContext(PropsContext)\n  const { popUpState, setPopUpState } = useContext(RtmContext)\n  const { popUpContainer } = styleProps || {}\n  const { dispatch, localVideoTrack, localAudioTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return popUpState !== popUpStateEnum.closed ? (\n    <div\n      style={{\n        ...styles.container,\n        ...popUpContainer\n      }}\n    >\n      <div style={{ color: '#fff', fontSize: 18, fontWeight: 700 }}>\n        {popUpState === popUpStateEnum.muteCamera ||\n        popUpState === popUpStateEnum.muteMic\n          ? 'Mute '\n          : 'Unmute '}\n        {popUpState === popUpStateEnum.muteCamera ||\n        popUpState === popUpStateEnum.unmuteCamera\n          ? 'Camera'\n          : 'Mic'}\n        ?\n      </div>\n      <div\n        style={{\n          flexDirection: 'row',\n          display: 'flex',\n          width: '100%',\n          justifyContent: 'space-around'\n        }}\n      >\n        <div\n          onClick={() => {\n            switch (popUpState) {\n              case popUpStateEnum.muteCamera:\n                local.hasVideo &&\n                  localVideoTrack &&\n                  muteVideo(local, dispatch, localVideoTrack)\n                break\n              case popUpStateEnum.muteMic:\n                local.hasAudio &&\n                  localAudioTrack &&\n                  muteAudio(local, dispatch, localAudioTrack)\n                break\n              case popUpStateEnum.unmuteCamera:\n                !local.hasVideo &&\n                  localVideoTrack &&\n                  muteVideo(local, dispatch, localVideoTrack)\n                break\n              case popUpStateEnum.unmuteMic:\n                !local.hasAudio &&\n                  localAudioTrack &&\n                  muteAudio(local, dispatch, localAudioTrack)\n                break\n            }\n            setPopUpState(popUpStateEnum.closed)\n          }}\n          style={styles.button}\n        >\n          Confirm\n        </div>\n        <div\n          style={styles.buttonClose}\n          onClick={() => setPopUpState(popUpStateEnum.closed)}\n        >\n          Close\n        </div>\n      </div>\n    </div>\n  ) : null\n}\n\nconst styles = {\n  button: {\n    color: '#fff',\n    cursor: 'pointer',\n    borderWidth: 2,\n    borderStyle: 'solid',\n    borderColor: '#fff',\n    padding: '2px 4px',\n    borderRadius: 4\n  } as CSSProperties,\n  buttonClose: {\n    color: '#fff',\n    cursor: 'pointer',\n    borderWidth: 2,\n    borderStyle: 'solid',\n    borderColor: '#fff',\n    padding: '2px 4px',\n    borderRadius: 4\n  },\n  container: {\n    backgroundColor: '#007bffaa',\n    position: 'absolute',\n    width: 240,\n    height: 80,\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 100,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-evenly',\n    alignItems: 'center'\n  } as CSSProperties\n}\n\nexport default PopUp\n","import React, { useContext } from 'react'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext, { remoteTrackState, UIKitUser } from '../../PropsContext'\nimport RtmContext, { mutingDevice } from '../../RtmContext'\n\nfunction RemoteAudioMute(props: { UIKitUser: UIKitUser }) {\n  const { styleProps } = useContext(PropsContext)\n  const { remoteBtnStyles } = styleProps || {}\n  const { sendMuteRequest, uidMap } = useContext(RtmContext)\n  const { muteRemoteAudio } = remoteBtnStyles || {}\n  const { UIKitUser } = props\n  const isMuted = UIKitUser.hasAudio === remoteTrackState.no\n\n  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? (\n    <div>\n      <BtnTemplate\n        style={muteRemoteAudio}\n        name={UIKitUser.hasAudio === remoteTrackState.subbed ? 'mic' : 'micOff'}\n        onClick={() =>\n          sendMuteRequest(mutingDevice.microphone, UIKitUser.uid, !isMuted)\n        }\n      />\n    </div>\n  ) : null\n}\n\nexport default RemoteAudioMute\n","import React, { useContext } from 'react'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext, { remoteTrackState, UIKitUser } from '../../PropsContext'\nimport RtmContext, { mutingDevice } from '../../RtmContext'\n\nfunction RemoteVideoMute(props: { UIKitUser: UIKitUser }) {\n  const { styleProps } = useContext(PropsContext)\n  const { sendMuteRequest, uidMap } = useContext(RtmContext)\n  const { remoteBtnStyles } = styleProps || {}\n  const { muteRemoteVideo } = remoteBtnStyles || {}\n  const { UIKitUser } = props\n  const isMuted = UIKitUser.hasVideo === remoteTrackState.no\n\n  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? (\n    <div>\n      <BtnTemplate\n        name={\n          UIKitUser.hasVideo === remoteTrackState.subbed\n            ? 'videocam'\n            : 'videocamOff'\n        }\n        style={muteRemoteVideo}\n        onClick={() =>\n          sendMuteRequest(mutingDevice.camera, UIKitUser.uid, !isMuted)\n        }\n      />\n    </div>\n  ) : null\n}\n\nexport default RemoteVideoMute\n","import React, { CSSProperties, useContext } from 'react'\nimport RtmContext from './RtmContext'\nimport PropsContext, { UIKitUser } from './PropsContext'\n\nconst Username = (props: { user: UIKitUser; style?: React.CSSProperties }) => {\n  const { usernames } = useContext(RtmContext)\n  const { rtmProps, styleProps } = useContext(PropsContext)\n  const { user } = props\n\n  return rtmProps?.displayUsername ? (\n    <p style={{ ...styles.username, ...styleProps?.usernameText }}>\n      {user.uid === 1 ? 'Screenshare' : usernames[user.uid]}\n    </p>\n  ) : (\n    <React.Fragment />\n  )\n}\n\nconst styles = {\n  username: {\n    position: 'absolute',\n    background: '#007bffaa',\n    padding: '2px 8px',\n    color: '#fff',\n    margin: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 90\n  } as CSSProperties\n}\n\nexport default Username\n","import React, { useContext } from 'react'\nimport RtcContext from './../RtcContext'\nimport BtnTemplate from './BtnTemplate'\nimport { UIKitUser } from './../PropsContext'\n\nfunction SwapUser(props: { UIKitUser: UIKitUser }) {\n  const { dispatch } = useContext(RtcContext)\n  const { UIKitUser } = props\n\n  return (\n    <div>\n      <BtnTemplate\n        name='remoteSwap'\n        onClick={() => dispatch({ type: 'user-swap', value: [UIKitUser] })}\n      />\n    </div>\n  )\n}\n\nexport default SwapUser\n","import React, { useContext } from 'react'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport SwapUser from './Controls/SwapUser'\nimport PropsContext, { VideoPlaceholderProps } from './PropsContext'\n/**\n * React component that is renderd when the video track is muted.\n */\nconst VideoPlaceholder = (props: VideoPlaceholderProps) => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { maxViewStyles, maxViewOverlayContainer } = styleProps || {}\n  const { user } = props\n  const { CustomVideoPlaceholder } = rtcProps\n\n  return !CustomVideoPlaceholder ? (\n    <div\n      key={user.uid}\n      style={{\n        ...style.max,\n        ...maxViewStyles\n      }}\n    >\n      <div style={style.imgContainer}>\n        <img\n          style={style.img}\n          src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci11c2VyIj48cGF0aCBkPSJNMjAgMjF2LTJhNCA0IDAgMCAwLTQtNEg4YTQgNCAwIDAgMC00IDR2MiI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+'\n        />\n      </div>\n      {props.isShown && (\n        <div\n          style={{\n            ...style.btnContainer,\n            ...maxViewOverlayContainer\n          }}\n        >\n          {props.showButtons && (\n            <React.Fragment>\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n              {props.showSwap && <SwapUser UIKitUser={user} />}\n            </React.Fragment>\n          )}\n        </div>\n      )}\n    </div>\n  ) : (\n    CustomVideoPlaceholder && CustomVideoPlaceholder({ ...props }, null)\n  )\n}\n\nconst style = {\n  max: {\n    flex: 1,\n    display: 'flex',\n    backgroundColor: '#007bff33',\n    flexDirection: 'row',\n    position: 'relative'\n  } as React.CSSProperties,\n  imgContainer: {\n    flex: 10,\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  img: {\n    width: 100,\n    height: 100,\n    position: 'absolute',\n    alignSelf: 'center',\n    justifySelf: 'center',\n    margin: 'auto',\n    display: 'flex'\n  } as React.CSSProperties,\n  btnContainer: {\n    position: 'absolute',\n    margin: 5,\n    flexDirection: 'column',\n    display: 'flex'\n  } as React.CSSProperties\n}\n\nexport default VideoPlaceholder\n","import { AgoraVideoPlayer, IRemoteVideoTrack } from 'agora-rtc-react'\nimport React, { CSSProperties, useContext, useState } from 'react'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport PropsContext, { UIKitUser } from './PropsContext'\nimport RtcContext from './RtcContext'\nimport Username from './Username'\nimport VideoPlaceholder from './VideoPlaceholder'\n/**\n * React component to display the user video in maximized view\n */\nconst MaxVideoView = (props: {\n  user: UIKitUser\n  style?: React.CSSProperties\n}) => {\n  const { mediaStore } = useContext(RtcContext)\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { maxViewStyles, videoMode, maxViewOverlayContainer } = styleProps || {}\n  const renderModeProp = videoMode?.max\n  const [isShown, setIsShown] = useState(false)\n  const { user } = props\n\n  return (\n    <div\n      id='maxvideoview'\n      style={{\n        ...styles.container,\n        ...props.style,\n        ...maxViewStyles\n      }}\n      onMouseEnter={() => setIsShown(true)}\n      onMouseLeave={() => setIsShown(false)}\n    >\n      {user.hasVideo === 1 ? (\n        // hasVideo is 1 if the local user has video enabled, or if remote user video is subbed\n        <div id='finishvideocontainer' style={styles.videoContainer}>\n          {!rtcProps.disableRtm && <Username user={user} />}\n          <AgoraVideoPlayer\n            style={styles.videoplayer}\n            config={{\n              fit: renderModeProp || 'cover'\n            }}\n            videoTrack={mediaStore[user.uid].videoTrack as IRemoteVideoTrack}\n          />\n          {isShown && (\n            <div\n              style={{\n                ...styles.overlay,\n                ...maxViewOverlayContainer\n              }}\n            >\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div style={styles.videoContainer}>\n          {!rtcProps.disableRtm && <Username user={user} />}\n          <VideoPlaceholder user={user} isShown={isShown} showButtons />\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst styles = {\n  container: { display: 'flex', flex: 1 },\n  videoContainer: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative'\n  } as CSSProperties,\n  videoplayer: {\n    width: '100%',\n    display: 'flex',\n    flex: 1\n  },\n  overlay: {\n    position: 'absolute',\n    margin: 5,\n    flexDirection: 'column',\n    display: 'flex'\n  } as CSSProperties,\n  username: {\n    position: 'absolute',\n    background: '#007bffaa',\n    padding: '2px 8px',\n    color: '#fff',\n    margin: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 90\n  } as CSSProperties\n}\n\nexport default MaxVideoView\n","import React, { useContext, useEffect, useRef, useState } from 'react'\nimport MinUidContext from './MinUidContext'\nimport MaxUidContext from './MaxUidContext'\nimport PropsContext from './PropsContext'\nimport MaxVideoView from './MaxVideoView'\n\n/**\n * React Component to render the user videos in a grid\n */\nconst GridVideo: React.FC = () => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { gridVideoCells, gridVideoContainer } = styleProps || {}\n  const max = useContext(MaxUidContext)\n  const min = useContext(MinUidContext)\n  const users =\n    rtcProps.role === 'audience'\n      ? [...max, ...min].filter((user) => user.uid !== 0)\n      : [...max, ...min]\n  const parentRef = useRef<HTMLDivElement>(null)\n  const [width, setWidth] = useState(window.innerWidth)\n  const [height, setHeight] = useState(window.innerHeight)\n  const isLandscape = width > height\n  const unit = 'minmax(0, 1fr) '\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (parentRef.current) {\n        setWidth(parentRef.current.offsetWidth)\n        setHeight(parentRef.current.offsetHeight)\n      }\n    }\n    window.addEventListener('resize', handleResize)\n    if (parentRef.current) {\n      setWidth(parentRef.current.offsetWidth)\n      setHeight(parentRef.current.offsetHeight)\n    }\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return (\n    <div\n      ref={parentRef}\n      style={{\n        ...{\n          width: '100%',\n          height: '100%',\n          display: 'grid',\n          gridTemplateColumns: isLandscape\n            ? users.length > 9\n              ? unit.repeat(4)\n              : users.length > 4\n              ? unit.repeat(3)\n              : users.length > 1\n              ? unit.repeat(2)\n              : unit\n            : users.length > 8\n            ? unit.repeat(3)\n            : users.length > 2\n            ? unit.repeat(2)\n            : unit\n        },\n        ...gridVideoContainer\n      }}\n    >\n      {users.map((user) => (\n        <MaxVideoView\n          user={user}\n          style={{ ...{ height: '100%', width: '100%' }, ...gridVideoCells }}\n          key={user.uid}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default GridVideo\n","import { AgoraVideoPlayer, IRemoteVideoTrack } from 'agora-rtc-react'\nimport React, { useContext, useState } from 'react'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport SwapUser from './Controls/SwapUser'\nimport PropsContext, { UIKitUser } from './PropsContext'\nimport RtcContext from './RtcContext'\nimport TracksContext from './TracksContext'\nimport VideoPlaceholder from './VideoPlaceholder'\n\n/**\n * React context to expose user array displayed in the smaller view\n */\nconst MinVideoView = (props: { user: UIKitUser }) => {\n  const { mediaStore } = useContext(RtcContext)\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { facingMode } = useContext(TracksContext)\n\n  const {\n    minViewStyles,\n    videoMode,\n    minViewOverlayContainer,\n    showSwapUser = false\n  } = styleProps || {}\n  const renderModeProp = videoMode?.min\n  const [isShown, setIsShown] = useState(false)\n  const { user } = props\n\n  return (\n    <div\n      style={{\n        ...{ display: 'flex', flex: 1 },\n        ...minViewStyles\n      }}\n      onMouseEnter={() => setIsShown(true)}\n      onMouseLeave={() => setIsShown(false)}\n    >\n      {user.hasVideo === 1 ? (\n        <div\n          style={{\n            ...{\n              display: 'flex',\n              flex: 1,\n              position: 'relative'\n            }\n          }}\n        >\n          <AgoraVideoPlayer\n            style={{\n              flex: 10,\n              display: 'flex',\n              transform: facingMode === 'environment' ? 'scaleX(-1)' : 'none'\n            }}\n            config={{\n              fit: renderModeProp !== undefined ? renderModeProp : 'cover'\n            }}\n            videoTrack={mediaStore[user.uid].videoTrack as IRemoteVideoTrack}\n          />\n          {isShown && (\n            <div\n              style={{\n                ...{\n                  margin: 4,\n                  position: 'absolute',\n                  flex: 1,\n                  display: 'flex',\n                  flexDirection: 'column'\n                },\n                ...minViewOverlayContainer\n              }}\n            >\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n              {showSwapUser && <SwapUser UIKitUser={user} />}\n            </div>\n          )}\n        </div>\n      ) : (\n        <VideoPlaceholder user={user} isShown={isShown} showButtons showSwap />\n      )}\n    </div>\n  )\n}\n\nexport default MinVideoView\n","import React, { useContext, useEffect, useRef, useState } from 'react'\nimport MaxUidContext, { MaxUidConsumer } from './MaxUidContext'\nimport MaxVideoView from './MaxVideoView'\nimport MinUidContext, { MinUidConsumer } from './MinUidContext'\nimport MinVideoView from './MinVideoView'\nimport PropsContext from './PropsContext'\nimport styles from './styles.module.css'\n\n/**\n * React Component to render the user videos in the pinned/spotlight layout\n */\nconst PinnedVideo: React.FC = () => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const max = useContext(MaxUidContext)\n  const min = useContext(MinUidContext)\n  const users =\n    rtcProps.role === 'audience'\n      ? [...max, ...min].filter((user) => user.uid !== 0)\n      : [...max, ...min]\n  const {\n    minViewContainer,\n    pinnedVideoContainer,\n    maxViewContainer,\n    scrollViewContainer\n  } = styleProps || {}\n  const parentRef = useRef<HTMLDivElement>(null)\n  const [width, setWidth] = useState(0)\n  const [height, setHeight] = useState(0)\n  const isLandscape = width > height\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (parentRef.current) {\n        setWidth(parentRef.current.offsetWidth)\n        setHeight(parentRef.current.offsetHeight)\n      }\n    }\n    window.addEventListener('resize', handleResize)\n    if (parentRef.current) {\n      setWidth(parentRef.current.offsetWidth)\n      setHeight(parentRef.current.offsetHeight)\n    }\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n  return (\n    <div\n      id='pinnedvideo'\n      ref={parentRef}\n      style={{\n        ...{\n          display: 'flex',\n          flex: 1,\n          flexDirection: isLandscape ? 'row' : 'column-reverse',\n          overflow: 'hidden'\n        },\n        ...pinnedVideoContainer\n      }}\n    >\n      <div\n        id='maxviewcontainer'\n        style={{\n          ...{\n            display: 'flex',\n            flex: isLandscape ? 5 : 4\n          },\n          ...maxViewContainer\n        }}\n      >\n        <MaxUidConsumer>\n          {(maxUsers) =>\n            rtcProps.role === 'audience' && maxUsers[0].uid === 0 ? null : (\n              <MaxVideoView user={maxUsers[0]} />\n            )\n          }\n        </MaxUidConsumer>\n      </div>\n      {users?.length > 1 && (\n        <div\n          className={styles.scrollbar}\n          style={{\n            ...{\n              overflowY: isLandscape ? 'scroll' : 'hidden',\n              overflowX: !isLandscape ? 'scroll' : 'hidden',\n              display: 'flex',\n              flex: 1,\n              flexDirection: isLandscape ? 'column' : 'row'\n            },\n            ...scrollViewContainer\n          }}\n        >\n          <MinUidConsumer>\n            {(minUsers) =>\n              minUsers.map((user) =>\n                rtcProps.role === 'audience' && user.uid === 0 ? null : (\n                  <div\n                    style={{\n                      ...{\n                        minHeight: isLandscape ? '25vh' : '99%',\n                        minWidth: isLandscape ? '99%' : '40vw',\n                        margin: 2,\n                        display: 'flex'\n                      },\n                      ...minViewContainer\n                    }}\n                    key={user.uid}\n                  >\n                    <MinVideoView user={user} />\n                  </div>\n                )\n              )\n            }\n          </MinUidConsumer>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default PinnedVideo\n","import AgoraRTC, { ILocalVideoTrack, UID } from 'agora-rtc-react'\n\nconst startScreenshare = async (\n  appId: string,\n  channel: string,\n  track: ILocalVideoTrack,\n  screenshareToken?: string | null,\n  screenshareUid?: number,\n  tokenUrl?: string,\n  enableDualStream?: boolean\n) => {\n  const screenClient = AgoraRTC.createClient({\n    mode: 'live',\n    role: 'host',\n    codec: 'vp8'\n  })\n  let returnedUid: UID = 0\n\n  const uid = screenshareUid || 1 // 1 is default\n\n  let localVideoTrackHasPublished = false\n\n  async function init() {\n    try {\n      console.log(screenClient)\n      if (tokenUrl) {\n        screenClient.on('token-privilege-will-expire', async () => {\n          console.log('token will expire')\n          const res = await fetch(\n            tokenUrl + '/rtc/' + channel + '/publisher/uid/' + uid + '/'\n          )\n          const data = await res.json()\n          const token = data.rtcToken\n          screenClient.renewToken(token)\n        })\n\n        screenClient.on('token-privilege-did-expire', async () => {\n          const res = await fetch(\n            tokenUrl + '/rtc/' + channel + '/publisher/uid/' + uid + '/'\n          )\n          const data = await res.json()\n          const token = data.rtcToken\n          screenClient.renewToken(token)\n        })\n      }\n\n      track.on('track-ended', () => {\n        screenClient.leave()\n        screenClient.removeAllListeners()\n      })\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  async function join(): Promise<void> {\n    screenClient.setClientRole('host')\n\n    if (tokenUrl) {\n      try {\n        const res = await fetch(\n          tokenUrl + '/rtc/' + channel + '/publisher/uid/' + uid + '/'\n        )\n        const data = await res.json()\n        const token = data.rtcToken\n        returnedUid = await screenClient.join(appId, channel, token, uid)\n      } catch (e) {\n        console.log(e)\n      }\n    } else {\n      returnedUid = await screenClient.join(\n        appId,\n        channel,\n        screenshareToken || null,\n        uid || 0\n      )\n    }\n  }\n\n  async function publish() {\n    if (enableDualStream) {\n      await screenClient.enableDualStream()\n    }\n    if (track.enabled) {\n      if (!localVideoTrackHasPublished) {\n        await screenClient.publish([track]).then(() => {\n          localVideoTrackHasPublished = true\n        })\n      }\n    }\n  }\n\n  const stop = async () => {\n    try {\n      track.close()\n      await screenClient.leave()\n      screenClient.removeAllListeners()\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  stopScreenshare = stop\n\n  await init()\n  await join()\n  await publish()\n  if (returnedUid) console.log(returnedUid)\n}\n\nlet stopScreenshare = () => {}\n\nexport { startScreenshare, stopScreenshare }\n","import { UID } from 'agora-rtc-react'\nimport {\n  CallbacksInterface,\n  remoteTrackState,\n  RemoteUIKitUser,\n  ToggleState,\n  UIKitUser\n} from './PropsContext'\nimport { ActionType } from './RtcContext'\nimport { actionTypeGuard } from './Utils/actionTypeGuard'\n\ntype stateType = {\n  max: UIKitUser[]\n  min: UIKitUser[]\n  isScreensharing: boolean\n}\n\nexport const initState = {\n  max: [\n    {\n      uid: 0,\n      hasAudio: remoteTrackState.no,\n      hasVideo: remoteTrackState.no\n    }\n  ] as UIKitUser[],\n  min: [] as UIKitUser[],\n  isScreensharing: false\n}\n\nconst reducer = (\n  state: stateType,\n  action: ActionType<keyof CallbacksInterface>\n) => {\n  let stateUpdate: Partial<stateType> = initState\n  const uids: UID[] = [...state.max, ...state.min].map((u: UIKitUser) => u.uid)\n\n  switch (action.type) {\n    case 'Screensharing':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = { ...state, isScreensharing: action.value[0] }\n        console.log('!Screensharingstate', state, stateUpdate)\n      }\n      break\n    case 'update-user-video':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: remoteTrackState.subbed,\n                hasVideo: remoteTrackState.subbed\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: remoteTrackState.subbed,\n                hasVideo: remoteTrackState.subbed\n              }\n            } else {\n              return user\n            }\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'user-joined':\n      if (actionTypeGuard(action, action.type)) {\n        if (uids.indexOf(action.value[0].uid) === -1) {\n          const minUpdate: stateType['min'] = [\n            ...state.min,\n            {\n              uid: action.value[0].uid,\n              hasAudio: remoteTrackState.no,\n              hasVideo: remoteTrackState.no\n            }\n          ]\n          if (minUpdate.length === 1 && state.max[0].uid === 0) {\n            stateUpdate = {\n              max: minUpdate,\n              min: state.max,\n              isScreensharing: state.isScreensharing\n            }\n          } else {\n            stateUpdate = {\n              min: minUpdate,\n              max: state.max,\n              isScreensharing: state.isScreensharing\n            }\n          }\n          console.log('****** new user joined!\\n', action.value[0].uid)\n        }\n      }\n      break\n    case 'user-unpublished':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          stateUpdate = {\n            max: [\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.no\n                    : (state.max[0].hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.no\n                    : (state.max[0].hasVideo as remoteTrackState)\n              }\n            ],\n            min: state.min,\n            isScreensharing: state.isScreensharing\n          }\n        } else {\n          const UIKitUser = state.min.find(\n            (user: UIKitUser) => user.uid === action.value[0].uid\n          )\n          if (UIKitUser) {\n            const minUpdate: stateType['min'] = [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0].uid\n              ),\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.no\n                    : (UIKitUser.hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.no\n                    : (UIKitUser.hasVideo as remoteTrackState)\n              }\n            ]\n            stateUpdate = {\n              min: minUpdate,\n              max: state.max,\n              isScreensharing: state.isScreensharing\n            }\n          }\n        }\n      }\n      break\n    case 'user-published':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          stateUpdate = {\n            max: [\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.subbed\n                    : (state.max[0].hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.subbed\n                    : (state.max[0].hasVideo as remoteTrackState)\n              }\n            ],\n            min: state.min,\n            isScreensharing: state.isScreensharing\n          }\n        } else {\n          stateUpdate = {\n            min: state.min.map((user) => {\n              if (user.uid !== action.value[0].uid) {\n                return user\n              } else {\n                return {\n                  uid: user.uid,\n                  hasAudio:\n                    action.value[1] === 'audio'\n                      ? remoteTrackState.subbed\n                      : (user.hasAudio as remoteTrackState),\n                  hasVideo:\n                    action.value[1] === 'video'\n                      ? remoteTrackState.subbed\n                      : (user.hasVideo as remoteTrackState)\n                }\n              }\n            }),\n            max: state.max,\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n    case 'user-left':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          const minUpdate = [...state.min]\n          stateUpdate = {\n            max: [minUpdate.pop() as UIKitUser],\n            min: minUpdate,\n            isScreensharing: state.isScreensharing\n          }\n        } else {\n          stateUpdate = {\n            min: state.min.filter((user) => user.uid !== action.value[0].uid),\n            max: state.max,\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n    case 'user-swap':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n        } else {\n          stateUpdate = {\n            max: [action.value[0]],\n            min: [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0].uid\n              ),\n              state.max[0]\n            ],\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n    case 'local-user-mute-video':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: user.hasAudio as ToggleState,\n                hasVideo: action.value[0]\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: user.hasAudio as ToggleState,\n                hasVideo: action.value[0]\n              }\n            } else {\n              return user\n            }\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'local-user-mute-audio':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: action.value[0],\n                hasVideo: user.hasVideo as ToggleState\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: action.value[0],\n                hasVideo: user.hasVideo as ToggleState\n              }\n            } else {\n              return user\n            }\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'remote-user-mute-video':\n      if (actionTypeGuard(action, action.type)) {\n        // window['track'] = action.value.videoTrack\n        // window['client'] = client\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid) {\n              return {\n                uid: user.uid,\n                hasVideo: action.value[1],\n                hasAudio: user.hasAudio\n              } as RemoteUIKitUser\n            } else return user\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasVideo: action.value[1],\n                hasAudio: user.hasAudio\n              } as RemoteUIKitUser\n            else return user\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'remote-user-mute-audio':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasAudio: action.value[1],\n                hasVideo: user.hasVideo\n              } as RemoteUIKitUser\n            else return user\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasAudio: action.value[1],\n                hasVideo: user.hasVideo\n              } as RemoteUIKitUser\n            else return user\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'leave-channel':\n      stateUpdate = initState\n      break\n    case 'ActiveSpeaker':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0]) {\n          stateUpdate = { ...state }\n        } else {\n          stateUpdate = {\n            max: [\n              state.min.find(\n                (user) => user.uid === action.value[0]\n              ) as UIKitUser\n            ],\n            min: [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0]\n              ),\n              state.max[0]\n            ],\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n  }\n\n  return { ...state, ...stateUpdate }\n}\n\nexport default reducer\n","import AgoraRTC, { createClient, ILocalVideoTrack, UID } from 'agora-rtc-react'\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useReducer,\n  useRef,\n  useState\n} from 'react'\nimport {\n  startScreenshare,\n  stopScreenshare\n} from './Controls/Local/screenshareFunctions'\nimport { MaxUidProvider } from './MaxUidContext'\nimport { MinUidProvider } from './MinUidContext'\nimport PropsContext, {\n  CallbacksInterface,\n  layout,\n  mediaStore,\n  RtcPropsInterface,\n  UIKitUser\n} from './PropsContext'\nimport reducer, { initState } from './Reducer'\nimport { RtcProvider } from './RtcContext'\nimport TracksContext from './TracksContext'\n\nconst useClient = createClient({ codec: 'vp8', mode: 'live' }) // pass in another client if use h264\n\n/**\n * React component that contains the RTC logic. It manages the user state and provides it the children components by wrapping them with context providers.\n */\nconst RtcConfigure: React.FC<PropsWithChildren<Partial<RtcPropsInterface>>> = (\n  props\n) => {\n  const uid = useRef<UID>()\n  const screenTrack = useRef<ILocalVideoTrack>()\n  const isScreensharingRef = useRef<boolean>(false)\n  const { localVideoTrack, localAudioTrack, switchCamera } =\n    useContext(TracksContext)\n  const { callbacks, rtcProps } = useContext(PropsContext)\n  const [ready, setReady] = useState<boolean>(false)\n  const [channelJoined, setChannelJoined] = useState<boolean>(false)\n  let joinRes: ((arg0: boolean) => void) | null = null // Resolve for canJoin -> to set canJoin to true\n  const canJoin = useRef(\n    new Promise<boolean | void>((resolve, reject) => {\n      joinRes = resolve\n      console.log(reject)\n    })\n  )\n\n  let client = useClient()\n  if (rtcProps.customRtcClient) {\n    // if customRtcClient prop is set then use custom client\n    client.removeAllListeners()\n    client = rtcProps.customRtcClient\n  }\n\n  let localVideoTrackHasPublished = false\n  let localAudioTrackHasPublished = false\n\n  const mediaStore = useRef<mediaStore>({})\n\n  let { callActive } = props\n  if (callActive === undefined) {\n    callActive = true\n  }\n\n  type stateType = {\n    max: UIKitUser[]\n    min: UIKitUser[]\n  }\n  const [uidState, dispatch] = useReducer<React.Reducer<stateType, any>>(\n    reducer,\n    initState\n  )\n\n  // init rtcEngine\n  useEffect(() => {\n    async function init() {\n      try {\n        console.log(client)\n        client.on('user-joined', async (...args) => {\n          const [remoteUser] = args\n          if (\n            (remoteUser.uid === props.screenshareUid &&\n              isScreensharingRef.current) ||\n            (remoteUser.uid === 1 && isScreensharingRef.current)\n          ) {\n          } else {\n            mediaStore.current[remoteUser.uid] = {}\n          }\n          dispatch({\n            type: 'user-joined',\n            value: args\n          })\n        })\n\n        client.on('user-published', async (...args) => {\n          // Get current peer IDs\n          const [remoteUser, mediaType] = args\n          console.log('user-published', remoteUser.uid)\n          if (\n            (remoteUser.uid === props.screenshareUid &&\n              isScreensharingRef.current) ||\n            (remoteUser.uid === 1 && isScreensharingRef.current)\n          ) {\n            dispatch({\n              type: 'user-published',\n              value: args\n            })\n          } else {\n            client\n              .subscribe(remoteUser, mediaType)\n              .then((_e) => {\n                mediaStore.current[remoteUser.uid][mediaType + 'Track'] =\n                  remoteUser[mediaType + 'Track']\n                if (mediaType === 'audio') {\n                  // eslint-disable-next-line no-unused-expressions\n                  remoteUser.audioTrack?.play()\n                } else {\n                  if (rtcProps.enableDualStream && rtcProps.dualStreamMode) {\n                    client.setStreamFallbackOption(\n                      remoteUser.uid,\n                      rtcProps.dualStreamMode\n                    )\n                  }\n                }\n                dispatch({\n                  type: 'user-published',\n                  value: args\n                })\n              })\n              .catch((e) => console.error(e))\n          }\n        })\n\n        client.on('user-unpublished', async (...args) => {\n          const [remoteUser, mediaType] = args\n          console.log('user-unpublished', remoteUser.uid)\n          if (mediaType === 'audio') {\n            // eslint-disable-next-line no-unused-expressions\n            remoteUser.audioTrack?.stop()\n          }\n          dispatch({\n            type: 'user-unpublished',\n            value: args\n          })\n          // }\n        })\n\n        client.on('connection-state-change', async (...args) => {\n          const [curState, prevState, reason] = args\n          console.log('connection', prevState, curState, reason)\n          if (curState === 'CONNECTED') {\n            setChannelJoined(true)\n          } else if (curState === 'DISCONNECTED') {\n            try {\n              stopScreenshare()\n              isScreensharingRef.current = false\n            } catch (e) {\n              console.log('stopscreenshare', e)\n            }\n            dispatch({ type: 'leave-channel', value: null })\n          } else {\n            setChannelJoined(false)\n          }\n        })\n\n        client.on('user-left', (...args) => {\n          dispatch({\n            type: 'user-left',\n            value: args\n          })\n        })\n\n        if (rtcProps.tokenUrl) {\n          const { tokenUrl, channel, uid } = rtcProps\n          client.on('token-privilege-will-expire', async () => {\n            console.log('token will expire')\n            const res = await fetch(\n              tokenUrl +\n                '/rtc/' +\n                channel +\n                '/publisher/uid/' +\n                (uid || 0) +\n                '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            client.renewToken(token)\n          })\n\n          client.on('token-privilege-did-expire', async () => {\n            const res = await fetch(\n              tokenUrl +\n                '/rtc/' +\n                channel +\n                '/publisher/uid/' +\n                (uid || 0) +\n                '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            client.renewToken(token)\n          })\n        }\n\n        if (callbacks) {\n          const events: [keyof CallbacksInterface] = Object.keys(\n            callbacks\n          ) as any\n          // !!!! fix type, validate event\n          events.map((e) => {\n            try {\n              client.on(e, (...args: any[]) => {\n                // eslint-disable-next-line prefer-spread\n                ;(callbacks[e] as Function).apply(null, args)\n              })\n            } catch (e) {\n              console.error(e)\n            }\n          })\n        }\n        ;(joinRes as (arg0: boolean) => void)(true)\n        setReady(true)\n      } catch (e) {\n        console.error(e)\n      }\n    }\n\n    if (joinRes) {\n      init()\n      return () => {\n        try {\n          client.removeAllListeners()\n        } catch (e) {\n          console.error(e)\n        }\n      }\n    } else return () => {}\n  }, [rtcProps.appId]) //, ready])\n\n  // Dynamically switches channel when channel prop changes\n  useEffect(() => {\n    let ignore = false\n    async function join(): Promise<void> {\n      await canJoin.current\n      const { tokenUrl, channel, uid: userUid, appId, token } = rtcProps\n      if (client && !ignore) {\n        if (rtcProps.role === 'audience') {\n          client.setClientRole(rtcProps.role)\n        } else {\n          client.setClientRole('host')\n        }\n        if (tokenUrl) {\n          try {\n            const res = await fetch(\n              tokenUrl +\n                '/rtc/' +\n                channel +\n                '/publisher/uid/' +\n                (userUid || 0) +\n                '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            uid.current = await client.join(appId, channel, token, userUid || 0)\n          } catch (e) {\n            console.error(e)\n          }\n        } else {\n          try {\n            uid.current = await client.join(\n              appId,\n              channel,\n              token || null,\n              userUid || 0\n            )\n          } catch (e) {\n            console.error(e)\n            callbacks?.ErrorJoining && callbacks.ErrorJoining()\n          }\n        }\n        // console.log('!uid: ', uid.current)\n      } else {\n        console.error('trying to join before RTC Engine was initialized')\n      }\n    }\n    if (callActive) {\n      join()\n      console.log('Attempted join: ', rtcProps.channel)\n    } else {\n      console.log('In precall - waiting to join')\n    }\n    return (): void => {\n      ignore = true\n      if (callActive) {\n        console.log('Leaving channel')\n        try {\n          stopScreenshare()\n          isScreensharingRef.current = false\n        } catch (e) {\n          console.error(e)\n        }\n        canJoin.current = client\n          .leave()\n          .catch((err: unknown) => console.log(err))\n      }\n    }\n  }, [rtcProps.channel, rtcProps.uid, callActive, rtcProps.tokenUrl])\n\n  // publish local stream\n  useEffect(() => {\n    async function publish() {\n      const currentPublishedTrack = client.localTracks.find(\n        (lt) => lt.trackMediaType === 'video'\n      )\n\n      if (\n        currentPublishedTrack &&\n        currentPublishedTrack.getTrackId() !== localVideoTrack?.getTrackId()\n      ) {\n        await client.unpublish([currentPublishedTrack])\n        localVideoTrackHasPublished = false\n\n        if (localVideoTrack) {\n          if (!localVideoTrack.enabled) await localVideoTrack.setEnabled(true)\n\n          await client.publish([localVideoTrack])\n\n          localVideoTrackHasPublished = true\n        }\n      }\n\n      if (rtcProps.enableDualStream) {\n        await client.enableDualStream()\n      }\n\n      // handle publish fail if track is not enabled\n      if (localAudioTrack?.enabled && channelJoined) {\n        if (!localAudioTrackHasPublished) {\n          await client.publish([localAudioTrack]).then(() => {\n            localAudioTrackHasPublished = true\n          })\n        }\n      }\n\n      if (localVideoTrack && channelJoined) {\n        if (!localVideoTrackHasPublished) {\n          if (!localVideoTrack.enabled) await localVideoTrack.setEnabled(true)\n\n          await client.publish([localVideoTrack])\n\n          localVideoTrackHasPublished = true\n        }\n      }\n    }\n\n    if (callActive && channelJoined && uid?.current !== undefined) {\n      publish()\n    }\n  }, [\n    callActive,\n    localVideoTrack,\n    localAudioTrack,\n    channelJoined,\n    uid?.current\n  ])\n\n  // update local state if tracks are not null\n  useEffect(() => {\n    if (localVideoTrack && localAudioTrack) {\n      mediaStore.current[0] = {\n        audioTrack: localAudioTrack,\n        videoTrack: localVideoTrack\n      }\n      dispatch({\n        type: 'update-user-video',\n        value: [localAudioTrack, localVideoTrack]\n      })\n    }\n  }, [localVideoTrack, localAudioTrack])\n\n  // renew token if token is updated\n  useEffect(() => {\n    if (channelJoined && rtcProps.token) {\n      client\n        .renewToken(rtcProps.token)\n        .then((e) => console.log('renewed token', e))\n    }\n  }, [rtcProps.token, channelJoined])\n\n  // set role if role is updated\n  useEffect(() => {\n    if (rtcProps.role) {\n      client\n        .setClientRole(rtcProps.role)\n        .then((e) => console.log('changed role', e))\n    }\n  }, [rtcProps.role, channelJoined])\n\n  // active speaker\n  useEffect(() => {\n    async function enableActiveSpeaker() {\n      if (rtcProps.activeSpeaker && rtcProps.layout !== layout.grid) {\n        client.on('volume-indicator', (volumes) => {\n          const highestvolumeObj = volumes.reduce(\n            (\n              highestVolume: {\n                level: number\n                uid: UID\n              },\n              volume\n            ) => {\n              if (highestVolume === null) {\n                return volume\n              } else {\n                if (volume.level > highestVolume.level) {\n                  return volume\n                }\n                return highestVolume\n              }\n            },\n            null\n          )\n          const activeSpeaker = highestvolumeObj\n            ? highestvolumeObj.uid\n            : undefined\n          const mapActiveSpeakerToZero =\n            activeSpeaker === uid.current ? 0 : activeSpeaker\n          if (activeSpeaker !== undefined) {\n            dispatch({\n              type: 'ActiveSpeaker',\n              value: [mapActiveSpeakerToZero]\n            })\n          }\n        })\n        await client.enableAudioVolumeIndicator()\n      }\n    }\n    if (callActive) {\n      enableActiveSpeaker()\n    }\n    return () => {\n      client.removeAllListeners('volume-indicator')\n    }\n  }, [rtcProps.activeSpeaker, rtcProps.layout])\n\n  const toggleScreensharing = async () => {\n    const start = async () => {\n      dispatch({\n        type: 'Screensharing',\n        value: [true]\n      })\n      screenTrack.current = await AgoraRTC.createScreenVideoTrack({}, 'disable')\n      const uid = rtcProps.screenshareUid || 1 // 1 is default\n      mediaStore.current[uid] = { videoTrack: screenTrack.current }\n      screenTrack.current.on('track-ended', () => {\n        isScreensharingRef.current = false\n        dispatch({\n          type: 'Screensharing',\n          value: [false]\n        })\n      })\n      isScreensharingRef.current = true\n      await startScreenshare(\n        rtcProps.appId,\n        rtcProps.channel,\n        screenTrack.current,\n        rtcProps.screenshareToken,\n        rtcProps.screenshareUid,\n        rtcProps.tokenUrl,\n        rtcProps.enableDualStream\n      )\n    }\n\n    const stop = () => {\n      stopScreenshare()\n      isScreensharingRef.current = false\n    }\n\n    if (isScreensharingRef.current) {\n      stop()\n    } else {\n      start()\n    }\n  }\n\n  return (\n    <RtcProvider\n      value={{\n        client,\n        mediaStore: mediaStore.current,\n        localVideoTrack,\n        localAudioTrack,\n        dispatch,\n        localUid: uid,\n        channelJoined,\n        toggleScreensharing: toggleScreensharing,\n        isScreensharing: isScreensharingRef.current,\n        switchCamera\n      }}\n    >\n      <MaxUidProvider value={uidState.max}>\n        <MinUidProvider value={uidState.min}>\n          {/* <MinUidProvider value={uidState.min}> */}\n          {ready ? props.children : null}\n        </MinUidProvider>\n      </MaxUidProvider>\n    </RtcProvider>\n  )\n}\n\nexport default RtcConfigure\n","import VirtualBackgroundExtension, {\n  IVirtualBackgroundProcessor\n} from 'agora-extension-virtual-background'\nimport AgoraRTC, { UID } from 'agora-rtc-react'\nimport AgoraRTM, {\n  createLazyChannel,\n  createLazyClient,\n  RtmEvents,\n  RtmMessage\n} from 'agora-rtm-react'\nimport React, { useContext, useEffect, useRef, useState } from 'react'\nimport muteAudio from './Controls/Local/muteAudio'\nimport muteVideo from './Controls/Local/muteVideo'\nimport { LocalContext } from './LocalUserContext'\nimport PropsContext from './PropsContext'\nimport RtcContext from './RtcContext'\nimport {\n  messageObject,\n  muteRequest,\n  mutingDevice,\n  popUpStateEnum,\n  RtmProvider,\n  rtmStatusEnum,\n  userData\n} from './RtmContext'\n\nconst timeNow = () => new Date().getTime()\nconst useChannel = createLazyChannel()\nconst useClient = createLazyClient()\n/**\n * React component that contains the RTM logic. It manages the usernames, remote mute requests and provides data to the children components by wrapping them with context providers.\n */\nconst RtmConfigure = (props: any) => {\n  const { rtcProps, rtmProps } = useContext(PropsContext)\n  const [isLoggedIn, setLoggedIn] = useState<boolean>(false)\n  const rtmClient = useClient(rtcProps.appId)\n  const channel = useChannel(rtmClient, rtcProps.channel)\n  const localUid = useRef<string>('')\n  const timerValueRef: any = useRef(5)\n  const ext = useRef(new VirtualBackgroundExtension())\n\n  const processor = useRef<IVirtualBackgroundProcessor>()\n  const local = useContext(LocalContext)\n  const { rtmCallbacks } = useContext(PropsContext)\n  const [uidMap, setUidMap] = useState<Object>({})\n  const [usernames, setUsernames] = useState<Object>({})\n  const [userDataMap, setUserDataMap] = useState<Object>({})\n  const [popUpState, setPopUpState] = useState<popUpStateEnum>(\n    popUpStateEnum.closed\n  )\n  const [rtmStatus, setRtmStatus] = useState<rtmStatusEnum>(\n    rtmStatusEnum.offline\n  )\n  const {\n    localUid: rtcUid,\n    localAudioTrack,\n    localVideoTrack,\n    dispatch,\n    channelJoined\n  } = useContext(RtcContext)\n\n  useEffect(() => {\n    const initExtension = async () => {\n      AgoraRTC.registerExtensions([ext.current])\n      processor.current = ext.current.createProcessor()\n      await processor.current.init('<Path to WASM module>')\n    }\n    initExtension()\n  }, [])\n\n  const login = async () => {\n    const { tokenUrl } = rtcProps\n    if (tokenUrl) {\n      try {\n        const res = await fetch(\n          tokenUrl + '/rtm/' + (rtmProps?.uid || localUid.current)\n        )\n        const data = await res.json()\n        const serverToken = data.rtmToken\n        await rtmClient.login({\n          uid: rtmProps?.uid || localUid.current,\n          token: serverToken\n        })\n        timerValueRef.current = 5\n      } catch (error) {\n        setTimeout(async () => {\n          timerValueRef.current = timerValueRef.current + timerValueRef.current\n          login()\n        }, timerValueRef.current * 1000)\n      }\n    } else {\n      try {\n        await rtmClient.login({\n          uid: rtmProps?.uid || localUid.current,\n          token: rtmProps?.token || undefined\n        })\n        timerValueRef.current = 5\n      } catch (error) {\n        setTimeout(async () => {\n          timerValueRef.current = timerValueRef.current + timerValueRef.current\n          login()\n        }, timerValueRef.current * 1000)\n      }\n    }\n  }\n\n  const blurBackground = async () => {\n    if (processor.current && localVideoTrack) {\n      localVideoTrack\n        .pipe(processor.current)\n        .pipe(localVideoTrack.processorDestination)\n      processor.current.setOptions({ type: 'blur', blurDegree: 2 })\n      await processor.current.enable()\n    }\n  }\n\n  const joinChannel = async () => {\n    if (rtcProps?.enableBlurBackground) {\n      await blurBackground()\n    }\n    try {\n      await channel.join()\n      timerValueRef.current = 5\n    } catch (error) {\n      setTimeout(async () => {\n        timerValueRef.current = timerValueRef.current + timerValueRef.current\n        joinChannel()\n      }, timerValueRef.current * 1000)\n    }\n  }\n\n  const init = async () => {\n    setRtmStatus(rtmStatusEnum.initialising)\n    // rtmProps?.uid\n    //   ? (localUid.current = String(rtmProps.uid))\n    //   :\n    rtcProps.uid\n      ? (localUid.current = String(rtcProps.uid))\n      : (localUid.current = String(timeNow()))\n\n    rtmClient.on('ConnectionStateChanged', (state, reason) => {\n      console.log(state, reason)\n    })\n\n    rtmClient.on('TokenExpired', async () => {\n      const { tokenUrl } = rtcProps\n      console.log('token expired - renewing')\n      if (tokenUrl) {\n        try {\n          const res = await fetch(\n            tokenUrl + '/rtm/' + (rtmProps?.uid || localUid.current)\n          )\n          const data = await res.json()\n          const serverToken = data.rtmToken\n          await rtmClient.renewToken(serverToken)\n          timerValueRef.current = 5\n        } catch (error) {\n          console.error('TokenExpiredError', error)\n        }\n      }\n    })\n\n    rtmClient.on('MessageFromPeer', (message, peerId) => {\n      handleReceivedMessage(message, peerId)\n    })\n\n    channel.on('ChannelMessage', (message, peerId) => {\n      handleReceivedMessage(message, peerId)\n    })\n\n    channel.on('MemberJoined', async (peerId) => {\n      await sendPeerMessage(createUserData(), peerId)\n    })\n    channel.on('MemberCountUpdated', async (count) => {\n      console.log('RTM-MemberCountUpdated: ', count)\n    })\n\n    // handle RTM callbacks\n    if (rtmCallbacks?.channel) {\n      Object.keys(rtmCallbacks.channel).map((callback) => {\n        if (rtmCallbacks.channel) {\n          channel.on(\n            callback as keyof RtmEvents.RtmChannelEvents,\n            rtmCallbacks.channel[callback]\n          )\n        }\n      })\n    } else if (rtmCallbacks?.client) {\n      Object.keys(rtmCallbacks.client).map((callback) => {\n        if (rtmCallbacks.client) {\n          rtmClient.on(\n            callback as keyof RtmEvents.RtmClientEvents,\n            rtmCallbacks.client[callback]\n          )\n        }\n      })\n    }\n\n    if (rtcProps.tokenUrl) {\n      const { tokenUrl, uid } = rtcProps\n      rtmClient.on('TokenExpired', async () => {\n        console.log('token expired')\n        const res = await fetch(tokenUrl + '/rtm/' + (uid || 0) + '/')\n        const data = await res.json()\n        const token = data.rtmToken\n        rtmClient.renewToken(token)\n      })\n    }\n\n    setRtmStatus(rtmStatusEnum.loggingIn)\n    await login()\n    setRtmStatus(rtmStatusEnum.loggedIn)\n    await joinChannel()\n    setRtmStatus(rtmStatusEnum.connected)\n    // console.log('!rtcUid', rtcUid, channelJoined)\n    setUsernames((p) => {\n      return { ...p, 0: rtmProps?.username }\n    })\n    sendChannelMessage(createUserData())\n  }\n\n  const createUserData = () => {\n    return {\n      messageType: 'UserData',\n      rtmId: rtmProps?.uid || localUid.current,\n      rtcId: rtcUid.current,\n      username: rtmProps?.username,\n      role: rtcProps.role === 'audience' ? 1 : 0,\n      uikit: {\n        platform: 'web',\n        framework: 'react',\n        version: '1.2.0'\n      },\n      agora: {\n        rtm: AgoraRTM.VERSION,\n        rtc: AgoraRTC.VERSION\n      }\n    } as userData\n  }\n\n  const sendMuteRequest = (device: mutingDevice, rtcId: UID, mute: boolean) => {\n    const forced = rtmProps?.showPopUpBeforeRemoteMute === false\n    const payload: muteRequest = {\n      messageType: 'MuteRequest',\n      device,\n      rtcId,\n      mute,\n      isForceful: forced\n    }\n    const peerId = uidMap[rtcId]\n    if (forced && !mute) {\n      console.log('cannot send force unmute request')\n    } else if (peerId) {\n      sendPeerMessage(payload, peerId)\n    } else {\n      console.log('peer not found')\n    }\n  }\n\n  const handleReceivedMessage = (message: RtmMessage, peerId: string) => {\n    let messageObject: messageObject | undefined\n    if (message.messageType === 'RAW') {\n      messageObject = parsePayload(message.rawMessage)\n    } else if (message.messageType === 'TEXT') {\n      messageObject = JSON.parse(message.text)\n    }\n    console.log(messageObject, peerId)\n    if (messageObject) {\n      switch (messageObject.messageType) {\n        case 'UserData':\n          handleReceivedUserDataMessage(messageObject)\n          break\n        case 'MuteRequest':\n          handleReceivedMuteMessage(messageObject)\n          break\n        case 'RtmDataRequest':\n          switch (messageObject.type) {\n            case 'ping':\n              handlePing(peerId)\n              break\n            case 'userData':\n              handleUserDataRequest(peerId)\n              break\n            default:\n              console.log(peerId)\n          }\n          break\n        default:\n          console.log('unknown message content')\n      }\n    } else {\n      console.log('unknown rtm message type')\n    }\n  }\n\n  const handleReceivedUserDataMessage = (userData: userData) => {\n    setUidMap((p) => {\n      return { ...p, [userData.rtcId]: userData.rtmId }\n    })\n    setUsernames((p) => {\n      return { ...p, [userData.rtcId]: userData.username }\n    })\n    setUserDataMap((p) => {\n      return { ...p, [userData.rtmId]: userData }\n    })\n    // console.log('userData', userData, userDataMap, uidMap)\n  }\n\n  const handleReceivedMuteMessage = (muteRequest: muteRequest) => {\n    // console.log('!muteRequest', muteRequest)\n    if (rtcUid.current === muteRequest.rtcId) {\n      if (muteRequest.isForceful) {\n        if (muteRequest.mute) {\n          if (muteRequest.device === mutingDevice.microphone) {\n            localAudioTrack && muteAudio(local, dispatch, localAudioTrack)\n          } else if (muteRequest.device === mutingDevice.camera) {\n            localVideoTrack && muteVideo(local, dispatch, localVideoTrack)\n          }\n        } else console.error('cannot force unmute')\n      } else {\n        if (muteRequest.device === mutingDevice.microphone) {\n          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteMic)\n          else setPopUpState(popUpStateEnum.unmuteMic)\n        } else if (muteRequest.device === mutingDevice.camera) {\n          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteCamera)\n          else setPopUpState(popUpStateEnum.unmuteCamera)\n        }\n      }\n    }\n  }\n\n  const handlePing = (peerId: string) => {\n    sendPeerMessage({ messageType: 'RtmDataRequest', type: 'pong' }, peerId)\n  }\n\n  const handleUserDataRequest = (peerId: string) => {\n    sendPeerMessage(createUserData(), peerId)\n  }\n\n  const sendChannelMessage = async (payload: messageObject) => {\n    const message = rtmClient.createMessage({\n      text: JSON.stringify(payload),\n      messageType: AgoraRTM.MessageType.TEXT\n    })\n    try {\n      await channel.sendMessage(message)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  const sendPeerMessage = async (payload: messageObject, peerId: string) => {\n    const message = rtmClient.createMessage({\n      text: JSON.stringify(payload),\n      messageType: AgoraRTM.MessageType.TEXT\n    })\n    try {\n      await rtmClient.sendMessageToPeer(message, String(peerId))\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  const end = async () => {\n    await rtmClient.logout()\n    // await channel.leave()\n    await rtmClient.removeAllListeners()\n    // await channel.removeAllListeners()\n  }\n\n  useEffect(() => {\n    // if RTC has joined channel then init\n    if (channelJoined) {\n      init()\n      setLoggedIn(true)\n    }\n    return () => {\n      if (channelJoined) {\n        end()\n      }\n    }\n  }, [rtcProps.channel, rtcProps.appId, channelJoined])\n\n  return (\n    <RtmProvider\n      value={{\n        rtmStatus,\n        sendPeerMessage,\n        sendChannelMessage,\n        sendMuteRequest,\n        rtmClient,\n        uidMap,\n        usernames,\n        userDataMap,\n        popUpState,\n        setPopUpState\n      }}\n    >\n      {isLoggedIn ? props.children : <React.Fragment />}\n    </RtmProvider>\n  )\n}\n\nconst enc = new TextEncoder()\nconst dec = new TextDecoder()\n\n/**\n * Create an RTM raw message from any serilizable JS Object, decode using the {@link parsePayload} function\n * @param msg message object\n * @returns Uint8Array\n */\nexport const createRawMessage = (msg: any) => {\n  return enc.encode(JSON.stringify(msg))\n}\n/**\n * Decode the received RTM message or message created using {@link createRawMessage}\n * @param data encoded raw RTM message\n * @returns JS Object\n */\nexport const parsePayload = (data: BufferSource) => {\n  return JSON.parse(dec.decode(data))\n}\n\nexport default RtmConfigure\n","import {\n  createCameraVideoTrack,\n  createMicrophoneAndCameraTracks,\n  ILocalAudioTrack,\n  ILocalVideoTrack\n} from 'agora-rtc-react'\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useState\n} from 'react'\nimport PropsContext, { RtcPropsInterface } from './PropsContext'\nimport { TracksProvider } from './TracksContext'\n\nconst useTracks = createMicrophoneAndCameraTracks(\n  { encoderConfig: {} },\n  { encoderConfig: {}, facingMode: 'user' }\n)\n\nconst useEnvironmentTrack = createCameraVideoTrack({\n  encoderConfig: {},\n  facingMode: 'environment'\n})\n\n/**\n * React component that create local camera and microphone tracks and assigns them to the child components\n */\nconst TracksConfigure: React.FC<\n  PropsWithChildren<Partial<RtcPropsInterface>>\n> = (props) => {\n  const [localVideoTrack, setLocalVideoTrack] =\n    useState<ILocalVideoTrack | null>(null)\n  const [localAudioTrack, setLocalAudioTrack] =\n    useState<ILocalAudioTrack | null>(null)\n\n  const { callbacks } = useContext(PropsContext)\n\n  const [facingMode, setFacingMode] = useState<'user' | 'environment'>('user')\n  const { ready: trackReady, tracks, error } = useTracks()\n  const { track: environmentTrack } = useEnvironmentTrack()\n\n  const switchCamera = async () => {\n    if (!tracks || !tracks[1] || !environmentTrack) return\n\n    const facing = facingMode === 'user' ? 'environment' : 'user'\n    setLocalVideoTrack(facing === 'user' ? tracks[1] : environmentTrack)\n    setFacingMode(facing)\n  }\n\n  useEffect(() => {\n    if (!localVideoTrack) return\n    localVideoTrack?.setEnabled(false)\n  }, [localVideoTrack])\n\n  useEffect(() => {\n    if (tracks !== null) {\n      setLocalAudioTrack(tracks[0])\n      setLocalVideoTrack(tracks[1])\n    } else if (error) {\n      callbacks?.EndCall && callbacks.EndCall()\n    }\n\n    return () => {\n      if (tracks) {\n        // eslint-disable-next-line no-unused-expressions\n        tracks[0]?.close()\n        tracks[0]?.stop()\n        // eslint-disable-next-line no-unused-expressions\n        tracks[1]?.close()\n        tracks[1]?.stop()\n      }\n      if (environmentTrack) {\n        environmentTrack.close()\n        environmentTrack.stop()\n      }\n\n      if (localVideoTrack) {\n        localVideoTrack.close()\n        localVideoTrack.stop()\n      }\n      if (error && callbacks?.EndCall) {\n         callbacks.EndCall()\n      }\n    }\n  }, [trackReady, error])\n\n  const ready = localAudioTrack !== null && localVideoTrack !== null\n\n  return (\n    <TracksProvider\n      value={{\n        localVideoTrack: localVideoTrack,\n        localAudioTrack: localAudioTrack,\n        switchCamera,\n        facingMode\n      }}\n    >\n      {ready ? props.children : null}\n    </TracksProvider>\n  )\n}\n\nexport default TracksConfigure\n","/**\n * @module AgoraUIKit\n */\nimport React, { useContext } from 'react'\nimport LocalControls from './Controls/LocalControls'\nimport PopUp from './Controls/Remote/RemoteMutePopUp'\nimport GridVideo from './GridVideo'\nimport LocalUserContext from './LocalUserContext'\nimport PinnedVideo from './PinnedVideo'\nimport PropsContext, {\n  layout,\n  PropsInterface,\n  PropsProvider\n} from './PropsContext'\nimport RtcConfigure from './RTCConfigure'\nimport RtmConfigure from './RTMConfigure'\nimport TracksConfigure from './TracksConfigure'\n\n/**\n * High level component to render the UI Kit\n * @param props {@link PropsInterface}\n */\nconst AgoraUIKit: React.FC<PropsInterface> = (props) => {\n  const { styleProps, rtcProps } = props\n  const { UIKitContainer } = styleProps || {}\n\n  return (\n    <PropsProvider value={props}>\n      <div\n        style={{\n          ...style,\n          ...UIKitContainer\n        }}\n      >\n        {rtcProps.role === 'audience' ? (\n          <VideocallUI />\n        ) : (\n          <TracksConfigure>\n            <VideocallUI />\n          </TracksConfigure>\n        )}\n      </div>\n    </PropsProvider>\n  )\n}\n\nexport const VideocallUI = () => {\n  const { rtcProps } = useContext(PropsContext)\n  return (\n    <RtcConfigure callActive={rtcProps.callActive}>\n      <LocalUserContext>\n        {rtcProps.disableRtm ? (\n          <React.Fragment>\n            {rtcProps?.layout === layout.grid ? <GridVideo /> : <PinnedVideo />}\n            <LocalControls />\n          </React.Fragment>\n        ) : (\n          <RtmConfigure>\n            <PopUp />\n            {rtcProps?.layout === layout.grid ? <GridVideo /> : <PinnedVideo />}\n            <LocalControls />\n          </RtmConfigure>\n        )}\n      </LocalUserContext>\n    </RtcConfigure>\n  )\n}\n\nconst style = {\n  display: 'flex',\n  flex: 1,\n  minHeight: 0,\n  flexDirection: 'column'\n} as React.CSSProperties\n\nexport default AgoraUIKit\n"],"names":["remoteTrackState","layout","ToggleState","initialValue","rtcProps","appId","channel","role","rtmProps","PropsContext","React","createContext","PropsProvider","Provider","icons","videocam","Fragment","points","x","y","width","height","rx","ry","videocamOff","d","x1","y1","x2","y2","remoteSwap","callEnd","mic","micOff","screen","stop","fullScreen","fill","stroke","strokeWidth","switchCamera","BtnTemplate","props","onClick","name","disabled","style","_useContext","useContext","styleProps","_ref","theme","BtnTemplateStyles","iconSize","customIcon","_extends","borderRadius","borderWidth","borderStyle","borderColor","backgroundColor","alignItems","justifyContent","display","cursor","margin","src","alt","xmlns","viewBox","opacity","strokeLinecap","strokeLinejoin","Icons","EndCall","callbacks","localBtnStyles","_ref2","endCall","FullScreen","normalScreen","_useState","useState","action","setAction","NormalScreen","MaxUidContext","MaxUidProvider","MaxUidConsumer","Consumer","MinUidContext","MinUidProvider","MinUidConsumer","TracksContext","TracksProvider","LocalContext","LocalUserContext","localAudioTrack","max","min","localUser","uid","find","u","hasAudio","enabled","value","children","RtcContext","RtcProvider","RtcConsumer","user","dispatch","localState","_temp2","newState","disabling","enabling","type","_temp","_catch","Promise","resolve","setEnabled","then","_temp3","e","reject","LocalAudioMute","muteLocalAudio","unmuteLocalAudio","_useContext2","local","muteAudio","LocalCameraSwitch","switchCameraButton","localVideoTrack","hasVideo","LocalVideoMute","muteLocalVideo","unmuteLocalVideo","muteVideo","Screenshare","screenshare","toggleScreensharing","isScreensharing","Timer","counter","setCounter","useEffect","timer","setInterval","clearInterval","minutes","Math","trunc","seconds","color","fontSize","paddingLeft","paddingRight","LocalControls","localBtnContainer","_ref$showTimer","showTimer","_ref$showSwapButton","showSwapButton","_ref$showEndCallButto","showEndCallButton","_ref$localBtnWrapper","localBtnWrapper","isMobile","test","navigator","userAgent","zIndex","flexDirection","id","enableScreensharing","rtmStatusEnum","clientRoleRaw","mutingDevice","popUpStateEnum","RtmContext","RtmProvider","RtmConsumer","PopUp","popUpState","setPopUpState","popUpContainer","_useContext3","closed","styles","container","fontWeight","muteCamera","muteMic","unmuteCamera","unmuteMic","button","buttonClose","padding","position","top","left","transform","RemoteAudioMute","remoteBtnStyles","sendMuteRequest","uidMap","muteRemoteAudio","UIKitUser","isMuted","no","subbed","microphone","RemoteVideoMute","muteRemoteVideo","camera","Username","usernames","displayUsername","username","usernameText","background","bottom","right","SwapUser","VideoPlaceholder","maxViewStyles","maxViewOverlayContainer","CustomVideoPlaceholder","key","imgContainer","img","isShown","btnContainer","showButtons","disableRtm","showSwap","flex","alignSelf","justifySelf","MaxVideoView","mediaStore","videoMode","renderModeProp","setIsShown","onMouseEnter","onMouseLeave","videoContainer","AgoraVideoPlayer","videoplayer","config","fit","videoTrack","overlay","GridVideo","gridVideoCells","gridVideoContainer","users","concat","filter","parentRef","useRef","window","innerWidth","setWidth","_useState2","innerHeight","setHeight","isLandscape","unit","handleResize","current","offsetWidth","offsetHeight","addEventListener","removeEventListener","ref","gridTemplateColumns","length","repeat","map","MinVideoView","facingMode","minViewStyles","minViewOverlayContainer","_ref$showSwapUser","showSwapUser","undefined","PinnedVideo","minViewContainer","pinnedVideoContainer","maxViewContainer","scrollViewContainer","overflow","maxUsers","className","scrollbar","overflowY","overflowX","minUsers","minHeight","minWidth","startScreenshare","track","screenshareToken","screenshareUid","tokenUrl","enableDualStream","init","console","log","screenClient","on","fetch","res","json","data","token","rtcToken","renewToken","leave","removeAllListeners","join","setClientRole","_screenClient$join","returnedUid","_screenClient$join2","publish","localVideoTrackHasPublished","_temp4","_temp5","_temp6","AgoraRTC","createClient","mode","codec","close","_temp7","stopScreenshare","initState","reducer","state","stateUpdate","uids","indexOf","minUpdate","pop","useClient","RtcConfigure","screenTrack","isScreensharingRef","ready","setReady","channelJoined","setChannelJoined","joinRes","canJoin","client","customRtcClient","localAudioTrackHasPublished","callActive","_useReducer","useReducer","uidState","args","Array","_len","_key","arguments","remoteUser","_len2","_key2","mediaType","subscribe","_e","_remoteUser$audioTrac","audioTrack","play","dualStreamMode","setStreamFallbackOption","error","_len3","_key3","_remoteUser$audioTrac2","_len4","_key4","curState","prevState","reason","_len5","_key5","events","Object","keys","_len6","_key6","apply","userUid","ignore","_client$join","_client$join2","ErrorJoining","err","_temp11","_temp10","_temp9","_temp12","_temp13","_temp8","_temp14","_temp15","_temp16","currentPublishedTrack","localTracks","lt","trackMediaType","_temp17","getTrackId","unpublish","_temp18","enableActiveSpeaker","activeSpeaker","grid","volumes","highestvolumeObj","reduce","highestVolume","volume","level","mapActiveSpeakerToZero","enableAudioVolumeIndicator","_temp19","start","createScreenVideoTrack","_AgoraRTC$createScree","localUid","timeNow","Date","getTime","useChannel","createLazyChannel","createLazyClient","RtmConfigure","isLoggedIn","setLoggedIn","rtmClient","timerValueRef","ext","VirtualBackgroundExtension","processor","rtmCallbacks","setUidMap","_useState3","setUsernames","_useState4","userDataMap","setUserDataMap","_useState5","_useState6","offline","rtmStatus","setRtmStatus","rtcUid","initExtension","registerExtensions","createProcessor","login","serverToken","rtmToken","setTimeout","blurBackground","pipe","processorDestination","setOptions","blurDegree","enable","joinChannel","enableBlurBackground","initialising","String","message","peerId","handleReceivedMessage","sendPeerMessage","createUserData","count","callback","loggingIn","loggedIn","connected","p","sendChannelMessage","messageType","rtmId","rtcId","uikit","platform","framework","version","agora","rtm","AgoraRTM","VERSION","rtc","device","mute","forced","showPopUpBeforeRemoteMute","payload","isForceful","messageObject","parsePayload","rawMessage","JSON","parse","text","handleReceivedUserDataMessage","handleReceivedMuteMessage","handlePing","handleUserDataRequest","userData","_extends2","_extends3","_extends4","muteRequest","createMessage","stringify","MessageType","TEXT","sendMessage","sendMessageToPeer","end","logout","enc","TextEncoder","dec","TextDecoder","createRawMessage","msg","encode","decode","useTracks","createMicrophoneAndCameraTracks","encoderConfig","useEnvironmentTrack","createCameraVideoTrack","TracksConfigure","setLocalVideoTrack","setLocalAudioTrack","setFacingMode","_useTracks","trackReady","tracks","_useEnvironmentTrack","environmentTrack","facing","_tracks$","_tracks$2","_tracks$3","_tracks$4","AgoraUIKit","UIKitContainer","VideocallUI"],"mappings":"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"}